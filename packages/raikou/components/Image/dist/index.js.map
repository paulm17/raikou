{"version":3,"sources":["../src/index.ts","../src/Image.tsx","../src/store.ts","css-module:./Image.module.css#css-module"],"sourcesContent":["export { Image } from './Image';\nexport type { ImageCssVariables, ImageFactory, ImageProps, ImageStylesNames } from './Image';\n","import React from \"react\";\nimport {\n  Box,\n  BoxProps,\n  StylesApiProps,\n  polymorphicFactory,\n  useProps,\n  useStyles,\n  createVarsResolver,\n  PolymorphicFactory,\n  RaikouRadius,\n  getRadius,\n} from \"@raikou/core\";\nimport { useStore } from \"./store\";\nimport classes from \"./Image.module.css\";\n\nexport type ImageStylesNames = \"root\";\nexport type ImageCssVariables = {\n  root: \"--image-radius\" | \"--image-object-fit\";\n};\n\nexport interface ImageProps extends BoxProps, StylesApiProps<ImageFactory> {\n  /** Key of `theme.radius` or any valid CSS value to set `border-radius`, `0` by default */\n  radius?: RaikouRadius;\n\n  /** Controls `object-fit` style, `'cover'` by default */\n  fit?: React.CSSProperties[\"objectFit\"];\n\n  /** Image url that will be used as a fallback in case `src` prop is not set or image cannot be loaded */\n  fallbackSrc?: string;\n\n  /** Image url */\n  src?: any;\n\n  /** Called when image fails to load */\n  onError?: (event: React.SyntheticEvent<HTMLImageElement, Event>) => void;\n}\n\nexport type ImageFactory = PolymorphicFactory<{\n  props: ImageProps;\n  defaultRef: HTMLImageElement;\n  defaultComponent: \"img\";\n  stylesNames: ImageStylesNames;\n  vars: ImageCssVariables;\n}>;\n\nconst defaultProps: Partial<ImageProps> = {};\n\nconst varsResolver = createVarsResolver<ImageFactory>((_, { radius, fit }) => ({\n  root: {\n    \"--image-radius\": radius === undefined ? undefined : getRadius(radius),\n    \"--image-object-fit\": fit,\n  },\n}));\n\nexport const Image = polymorphicFactory<ImageFactory>((_props, ref) => {\n  const props = useProps(\"Image\", defaultProps, _props);\n  const {\n    classNames,\n    className,\n    style,\n    styles,\n    unstyled,\n    vars,\n    onError,\n    src,\n    radius,\n    fit,\n    fallbackSrc,\n    ...others\n  } = props;\n\n  const getStyles = useStyles<ImageFactory>({\n    name: \"Image\",\n    classes,\n    props,\n    className,\n    style,\n    classNames,\n    styles,\n    unstyled,\n    vars,\n    varsResolver,\n  });\n\n  if (typeof window === \"undefined\") {\n    var request = require(\"request\").defaults({ encoding: null });\n\n    request.get(src, function (error: any, response: any) {\n      if (response === undefined) {\n        useStore.update((state) => {\n          state.error = true;\n        });\n      } else if (response.statusCode !== 200) {\n        useStore.update((state) => {\n          state.error = true;\n        });\n      }\n    });\n  }\n\n  return (\n    <Box\n      component=\"img\"\n      ref={ref}\n      {...getStyles(\"root\")}\n      src={useStore.getState().error ? fallbackSrc : src}\n      {...others}\n    />\n  );\n});\n\nImage.classes = classes;\nImage.displayName = \"@raikou/core/Image\";\n","import createStore from \"pure-store\";\n\nexport const useStore = createStore<{\n  error: boolean;\n}>({\n  error: false,\n});\n","import \"/Users/paul/development/src/github/raikou/packages/raikou/components/Image/src/Image.module.css\"; export default {\"root\":\"m-9e117634\"}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,mBAAkB;AAClB,kBAWO;;;ACZP,wBAAwB;AAEjB,IAAM,eAAW,kBAAAA,SAErB;AAAA,EACD,OAAO;AACT,CAAC;;;ACNyG,IAAO,uBAAQ,EAAC,QAAO,aAAY;;;AF8C7I,IAAM,eAAoC,CAAC;AAE3C,IAAM,mBAAe,gCAAiC,CAAC,GAAG,EAAE,QAAQ,IAAI,OAAO;AAAA,EAC7E,MAAM;AAAA,IACJ,kBAAkB,WAAW,SAAY,aAAY,uBAAU,MAAM;AAAA,IACrE,sBAAsB;AAAA,EACxB;AACF,EAAE;AAEK,IAAM,YAAQ,gCAAiC,CAAC,QAAQ,QAAQ;AACrE,QAAM,YAAQ,sBAAS,SAAS,cAAc,MAAM;AACpD,QAaI,YAZF;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EApEJ,IAsEM,IADC,mBACD,IADC;AAAA,IAXH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAIF,QAAM,gBAAY,uBAAwB;AAAA,IACxC,MAAM;AAAA,IACN;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,MAAI,OAAO,WAAW,aAAa;AACjC,QAAI,UAAU,QAAQ,SAAS,EAAE,SAAS,EAAE,UAAU,KAAK,CAAC;AAE5D,YAAQ,IAAI,KAAK,SAAU,OAAY,UAAe;AACpD,UAAI,aAAa,QAAW;AAC1B,iBAAS,OAAO,CAAC,UAAU;AACzB,gBAAM,QAAQ;AAAA,QAChB,CAAC;AAAA,MACH,WAAW,SAAS,eAAe,KAAK;AACtC,iBAAS,OAAO,CAAC,UAAU;AACzB,gBAAM,QAAQ;AAAA,QAChB,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SACE,6BAAAC,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,WAAU;AAAA,MACV;AAAA,OACI,UAAU,MAAM,IAHrB;AAAA,MAIC,KAAK,SAAS,SAAS,EAAE,QAAQ,cAAc;AAAA,QAC3C;AAAA,EACN;AAEJ,CAAC;AAED,MAAM,UAAU;AAChB,MAAM,cAAc;","names":["createStore","React"]}