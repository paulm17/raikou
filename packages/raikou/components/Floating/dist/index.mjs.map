{"version":3,"sources":["../src/use-delayed-hover.ts","../src/use-floating-auto-update.ts","../src/get-floating-position/get-floating-position.ts","../src/FloatingArrow/FloatingArrow.tsx","../src/FloatingArrow/get-arrow-position-styles.ts"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\ninterface UseDelayedHoverInput {\n  open: () => void;\n  close: () => void;\n  openDelay: number | undefined;\n  closeDelay: number | undefined;\n}\n\nexport function useDelayedHover({\n  open,\n  close,\n  openDelay,\n  closeDelay,\n}: UseDelayedHoverInput) {\n  const openTimeout = useRef(-1);\n  const closeTimeout = useRef(-1);\n\n  const clearTimeouts = () => {\n    window.clearTimeout(openTimeout.current);\n    window.clearTimeout(closeTimeout.current);\n  };\n\n  const openDropdown = () => {\n    clearTimeouts();\n\n    if (openDelay === 0 || openDelay === undefined) {\n      open();\n    } else {\n      openTimeout.current = window.setTimeout(open, openDelay);\n    }\n  };\n\n  const closeDropdown = () => {\n    clearTimeouts();\n\n    if (closeDelay === 0 || closeDelay === undefined) {\n      close();\n    } else {\n      closeTimeout.current = window.setTimeout(close, closeDelay);\n    }\n  };\n\n  useEffect(() => clearTimeouts, []);\n\n  return { openDropdown, closeDropdown };\n}\n","import { useEffect, useState } from \"react\";\nimport { autoUpdate } from \"@floating-ui/react\";\nimport { useDidUpdate } from \"@raikou/hooks\";\nimport { FloatingPosition } from \"./types\";\n\ninterface Payload {\n  opened: boolean | undefined;\n  floating: {\n    update: () => void;\n    refs: {\n      floating: React.MutableRefObject<any>;\n      reference: React.MutableRefObject<any>;\n    };\n  };\n  positionDependencies: any[];\n  position: FloatingPosition;\n}\n\nexport function useFloatingAutoUpdate({\n  opened,\n  floating,\n  position,\n  positionDependencies,\n}: Payload) {\n  const [delayedUpdate, setDelayedUpdate] = useState(0);\n\n  useEffect(() => {\n    if (floating.refs.reference.current && floating.refs.floating.current) {\n      return autoUpdate(\n        floating.refs.reference.current,\n        floating.refs.floating.current,\n        floating.update,\n      );\n    }\n\n    return undefined;\n  }, [\n    floating.refs.reference.current,\n    floating.refs.floating.current,\n    opened,\n    delayedUpdate,\n    position,\n  ]);\n\n  useDidUpdate(() => {\n    floating.update();\n  }, positionDependencies);\n\n  useDidUpdate(() => {\n    setDelayedUpdate((c) => c + 1);\n  }, [opened]);\n}\n","import type {\n  FloatingPlacement,\n  FloatingPosition,\n  FloatingSide,\n} from \"../types\";\n\nexport function getFloatingPosition(\n  dir: \"rtl\" | \"ltr\",\n  position: FloatingPosition,\n): FloatingPosition {\n  if (\n    dir === \"rtl\" &&\n    (position.includes(\"right\") || position.includes(\"left\"))\n  ) {\n    const [side, placement] = position.split(\"-\") as [\n      FloatingSide,\n      FloatingPlacement,\n    ];\n    const flippedPosition = side === \"right\" ? \"left\" : \"right\";\n    return placement === undefined\n      ? flippedPosition\n      : `${flippedPosition}-${placement}`;\n  }\n\n  return position;\n}\n","import React, { forwardRef } from \"react\";\nimport { useDirection } from \"@raikou/core\";\nimport { getArrowPositionStyles } from \"./get-arrow-position-styles\";\nimport { ArrowPosition, FloatingPosition } from \"../types\";\n\ninterface FloatingArrowProps extends React.ComponentPropsWithoutRef<\"div\"> {\n  position: FloatingPosition;\n  arrowSize: number;\n  arrowOffset: number;\n  arrowRadius: number;\n  arrowPosition: ArrowPosition;\n  arrowX: number | undefined;\n  arrowY: number | undefined;\n  visible: boolean | undefined;\n}\n\nexport const FloatingArrow = forwardRef<HTMLDivElement, FloatingArrowProps>(\n  (\n    {\n      position,\n      arrowSize,\n      arrowOffset,\n      arrowRadius,\n      arrowPosition,\n      visible,\n      arrowX,\n      arrowY,\n      style,\n      ...others\n    },\n    ref,\n  ) => {\n    const { dir } = useDirection();\n    if (!visible) {\n      return null;\n    }\n\n    return (\n      <div\n        {...others}\n        ref={ref}\n        style={{\n          ...style,\n          ...getArrowPositionStyles({\n            position,\n            arrowSize,\n            arrowOffset,\n            arrowRadius,\n            arrowPosition,\n            dir,\n            arrowX,\n            arrowY,\n          }),\n        }}\n      />\n    );\n  },\n);\n\nFloatingArrow.displayName = \"@raikou/core/FloatingArrow\";\n","import { rem } from \"@raikou/core\";\nimport type {\n  ArrowPosition,\n  FloatingPlacement,\n  FloatingPosition,\n  FloatingSide,\n} from \"../types\";\n\nfunction horizontalSide(\n  placement: FloatingPlacement | \"center\",\n  arrowY: number | undefined,\n  arrowOffset: number,\n  arrowPosition: ArrowPosition,\n) {\n  if (placement === \"center\" || arrowPosition === \"center\") {\n    return { top: arrowY };\n  }\n\n  if (placement === \"end\") {\n    return { bottom: arrowOffset };\n  }\n\n  if (placement === \"start\") {\n    return { top: arrowOffset };\n  }\n\n  return {};\n}\n\nfunction verticalSide(\n  placement: FloatingPlacement | \"center\",\n  arrowX: number | undefined,\n  arrowOffset: number,\n  arrowPosition: ArrowPosition,\n  dir: \"rtl\" | \"ltr\",\n) {\n  if (placement === \"center\" || arrowPosition === \"center\") {\n    return { left: arrowX };\n  }\n\n  if (placement === \"end\") {\n    return { [dir === \"ltr\" ? \"right\" : \"left\"]: arrowOffset };\n  }\n\n  if (placement === \"start\") {\n    return { [dir === \"ltr\" ? \"left\" : \"right\"]: arrowOffset };\n  }\n\n  return {};\n}\n\nconst radiusByFloatingSide: Record<\n  FloatingSide,\n  keyof Pick<\n    React.CSSProperties,\n    | \"borderBottomLeftRadius\"\n    | \"borderBottomRightRadius\"\n    | \"borderTopLeftRadius\"\n    | \"borderTopRightRadius\"\n  >\n> = {\n  bottom: \"borderTopLeftRadius\",\n  left: \"borderTopRightRadius\",\n  right: \"borderBottomLeftRadius\",\n  top: \"borderBottomRightRadius\",\n};\n\nexport function getArrowPositionStyles({\n  position,\n  arrowSize,\n  arrowOffset,\n  arrowRadius,\n  arrowPosition,\n  arrowX,\n  arrowY,\n  dir,\n}: {\n  position: FloatingPosition;\n  arrowSize: number;\n  arrowOffset: number;\n  arrowRadius: number;\n  arrowPosition: ArrowPosition;\n  arrowX: number | undefined;\n  arrowY: number | undefined;\n  dir: \"rtl\" | \"ltr\";\n}) {\n  const [side, placement = \"center\"] = position.split(\"-\") as [\n    FloatingSide,\n    FloatingPlacement,\n  ];\n  const baseStyles = {\n    width: rem(arrowSize),\n    height: rem(arrowSize),\n    transform: \"rotate(45deg)\",\n    position: \"absolute\",\n    [radiusByFloatingSide[side]]: rem(arrowRadius),\n  };\n\n  const arrowPlacement = rem(-arrowSize / 2);\n\n  if (side === \"left\") {\n    return {\n      ...baseStyles,\n      ...horizontalSide(placement, arrowY, arrowOffset, arrowPosition),\n      right: arrowPlacement,\n      borderLeftColor: \"transparent\",\n      borderBottomColor: \"transparent\",\n    };\n  }\n\n  if (side === \"right\") {\n    return {\n      ...baseStyles,\n      ...horizontalSide(placement, arrowY, arrowOffset, arrowPosition),\n      left: arrowPlacement,\n      borderRightColor: \"transparent\",\n      borderTopColor: \"transparent\",\n    };\n  }\n\n  if (side === \"top\") {\n    return {\n      ...baseStyles,\n      ...verticalSide(placement, arrowX, arrowOffset, arrowPosition, dir),\n      bottom: arrowPlacement,\n      borderTopColor: \"transparent\",\n      borderLeftColor: \"transparent\",\n    };\n  }\n\n  if (side === \"bottom\") {\n    return {\n      ...baseStyles,\n      ...verticalSide(placement, arrowX, arrowOffset, arrowPosition, dir),\n      top: arrowPlacement,\n      borderBottomColor: \"transparent\",\n      borderRightColor: \"transparent\",\n    };\n  }\n\n  return {};\n}\n"],"mappings":"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","names":["useEffect"]}