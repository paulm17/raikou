"use strict";var __create=Object.create,__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t=t||{})__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var r={};for(o in e)__hasOwnProp.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))t.indexOf(o)<0&&__propIsEnum.call(e,o)&&(r[o]=e[o]);return r},__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(t,r,o,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let e of __getOwnPropNames(r))__hasOwnProp.call(t,e)||e===o||__defProp(t,e,{get:()=>r[e],enumerable:!(a=__getOwnPropDesc(r,e))||a.enumerable});return t},__toESM=(e,t,r)=>(r=null!=e?__create(__getProtoOf(e)):{},__copyProps(!t&&e&&e.__esModule?r:__defProp(r,"default",{value:e,enumerable:!0}),e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),src_exports={},import_react8=(__export(src_exports,{Rating:()=>Rating}),module.exports=__toCommonJS(src_exports),__toESM(require("react"))),import_hooks=require("@raikou/hooks"),import_core2=require("@raikou/core"),import_react=__toESM(require("react"));function createSafeContext(t){const r=(0,import_react.createContext)(null);return[({children:e,value:t})=>import_react.default.createElement(r.Provider,{value:t},e),()=>{var e=(0,import_react.useContext)(r);if(null===e)throw new Error(t);return e}]}var import_react2=__toESM(require("react")),import_react3=require("react"),import_react4=require("react"),[RatingProvider,useRatingContext]=createSafeContext("Rating was not found in tree"),import_react7=__toESM(require("react")),import_core=require("@raikou/core"),import_react6=__toESM(require("react")),import_react5=__toESM(require("react"));function StarIcon(e){var{width:t,height:r,style:o}=e,e=__objRest(e,["width","height","style"]);return import_react5.default.createElement("svg",__spreadValues({viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:__spreadValues({width:t,height:r},o)},e),import_react5.default.createElement("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"}))}function StarSymbol({type:e}){var t=useRatingContext();return import_react6.default.createElement(StarIcon,__spreadProps(__spreadValues({},t.getStyles("starSymbol")),{"data-filled":"full"===e||void 0}))}function RatingItem(e){var{getSymbolLabel:t,emptyIcon:r,fullIcon:o,full:a,active:l,value:n,readOnly:s,fractionValue:i,id:u,onBlur:_,onChange:c,onInputChange:p}=e,e=__objRest(e,["size","getSymbolLabel","emptyIcon","fullIcon","full","active","value","readOnly","fractionValue","color","id","onBlur","onChange","onInputChange","style"]),m=useRatingContext(),o="function"==typeof o?o(n):o,r="function"==typeof r?r(n):r,d=(0,import_core.useDirection)()["dir"];return import_react7.default.createElement(import_react7.default.Fragment,null,!s&&import_react7.default.createElement("input",__spreadValues(__spreadProps(__spreadValues({},m.getStyles("input")),{onKeyDown:e=>" "===e.key&&c(n),id:u,type:"radio","data-active":l||void 0,"aria-label":null==t?void 0:t(n),value:n,onBlur:_,onChange:p}),e)),import_react7.default.createElement(import_core.Box,__spreadProps(__spreadValues({component:s?"div":"label"},m.getStyles("label")),{"data-read-only":s||void 0,htmlFor:u,onClick:()=>c(n),__vars:{"--rating-item-z-index":null==(t=1===i?void 0:l?2:0)?void 0:t.toString()}}),import_react7.default.createElement(import_core.Box,__spreadProps(__spreadValues({},m.getStyles("symbolBody")),{__vars:{"--rating-symbol-clip-path":1===i?void 0:"ltr"===d?`inset(0 ${l?100-100*i:100}% 0 0)`:`inset(0 0 0 ${l?100-100*i:100}% )`}}),a?o||import_react7.default.createElement(StarSymbol,{type:"full"}):r||import_react7.default.createElement(StarSymbol,{type:"empty"}))))}StarIcon.displayName="@raikou/core/StarIcon",StarSymbol.displayName="@raikou/core/StarSymbol",RatingItem.displayName="@raikou/core/RatingItem";var Rating_module_default={root:"m-f8d312f2",symbolGroup:"m-61734bb7",starSymbol:"m-5662a89a",input:"m-211007ba",label:"m-21342ee4",symbolBody:"m-fae05d6a"};function roundValueTo(e,t){e=Math.round(e/t)*t,t=(null==(t=(""+t).split(".")[1])?void 0:t.length)||0;return Number(e.toFixed(t))}var defaultProps={size:"sm",getSymbolLabel:e=>""+e,count:5,fractions:1,color:"yellow"},varsResolver=(0,import_core2.createVarsResolver)((e,{size:t,color:r})=>({root:{"--rating-size":(0,import_core2.getSize)(t,"rating-size"),"--rating-color":(0,import_core2.getThemeColor)(r,e)}})),Rating=(0,import_core2.factory)((e,t)=>{e=(0,import_core2.useProps)("Rating",defaultProps,e);const r=e,{classNames:o,className:a,style:l,styles:n,unstyled:s,vars:i,name:u,id:_,value:c,defaultValue:p,onChange:m,fractions:d,count:f,onMouseEnter:y,readOnly:g,onMouseMove:v,onHover:b,onMouseLeave:h,onTouchStart:S,onTouchEnd:P,size:O,variant:q,getSymbolLabel:B,emptySymbol:D,fullSymbol:L,highlightSelectedOnly:T}=r,F=__objRest(r,["classNames","className","style","styles","unstyled","vars","name","id","value","defaultValue","onChange","fractions","count","onMouseEnter","readOnly","onMouseMove","onHover","onMouseLeave","onTouchStart","onTouchEnd","size","variant","getSymbolLabel","color","emptySymbol","fullSymbol","highlightSelectedOnly"]),w=(0,import_core2.useStyles)({name:"Rating",classes:Rating_module_default,props:e,className:a,style:l,classNames:o,styles:n,unstyled:s,vars:i,varsResolver:varsResolver}),A=(0,import_core2.useDirection)()["dir"],$=(0,import_hooks.useId)(u),G=(0,import_hooks.useId)(_),E=(0,import_react8.useRef)(null),[H,R]=(0,import_hooks.useUncontrolled)({value:c,defaultValue:p,finalValue:0,onChange:m}),[M,I]=(0,import_react8.useState)(-1),[J,V]=(0,import_react8.useState)(!0),x=Math.floor(d),C=Math.floor(f),k=1/x,N=roundValueTo(H,k),j=-1!==M?M:N,z=e=>{var{left:t,right:r,width:o}=E.current.getBoundingClientRect(),o=o/C,r="rtl"===A?r-e:e-t;return(0,import_hooks.clamp)(roundValueTo(r/o+k/2,k),k,C)};const X=()=>J&&I(-1),K=e=>{g||("number"==typeof e?I(e):I(parseFloat(e.target.value)))},U=e=>{g||("number"==typeof e?R(e):R(parseFloat(e.target.value)))};e=Array(C).fill(0).map((e,a)=>{const l=a+1;var t=Array.from(new Array(0===a?x+1:x)),r=!g&&Math.ceil(M)===l;return import_react8.default.createElement("div",__spreadValues({key:l,"data-active":r||void 0},w("symbolGroup")),t.map((e,t)=>{var r=k*(0===a?t:t+1),o=roundValueTo(l-1+r,k);return import_react8.default.createElement(RatingItem,{key:l+"-"+o,size:O,getSymbolLabel:B,emptyIcon:D,fullIcon:L,full:T?o===j:o<=j,active:o===j,checked:o===N,readOnly:g,fractionValue:r,value:o,name:$,onChange:U,onBlur:X,onInputChange:K,id:G+`-${a}-`+t})}))});return import_react8.default.createElement(RatingProvider,{value:{getStyles:w}},import_react8.default.createElement(import_core2.Box,__spreadValues(__spreadProps(__spreadValues({ref:(0,import_hooks.useMergedRef)(E,t)},w("root")),{onMouseMove:e=>{null!=v&&v(e),g||(e=z(e.clientX),I(e),e!==M&&null!=b&&b(e))},onMouseEnter:e=>{null!=y&&y(e),g||V(!1)},onMouseLeave:e=>{null!=h&&h(e),g||(I(-1),V(!0),-1!==M&&null!=b&&b(-1))},onTouchStart:e=>{e.preventDefault();var t=e["touches"];1===t.length&&(t=t[0],R(z(t.clientX)),null!=S)&&S(e)},onTouchEnd:e=>{e.preventDefault(),null!=P&&P(e)},variant:q,size:O}),F),e))});Rating.classes=Rating_module_default,Rating.displayName="@raikou/core/Rating";