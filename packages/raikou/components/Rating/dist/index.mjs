var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,a)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,__spreadValues=(e,t)=>{for(var a in t=t||{})__hasOwnProp.call(t,a)&&__defNormalProp(e,a,t[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(t))__propIsEnum.call(t,a)&&__defNormalProp(e,a,t[a]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var a={};for(o in e)__hasOwnProp.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))t.indexOf(o)<0&&__propIsEnum.call(e,o)&&(a[o]=e[o]);return a};import React6,{useRef,useState as useState2}from"react";import{clamp,useId,useMergedRef,useUncontrolled}from"@raikou/hooks";import{Box as Box2,factory,useProps,useStyles,createVarsResolver,useDirection as useDirection2,getSize,getThemeColor}from"@raikou/core";import React,{createContext,useContext}from"react";function createSafeContext(t){const a=createContext(null);return[({children:e,value:t})=>React.createElement(a.Provider,{value:t},e),()=>{var e=useContext(a);if(null===e)throw new Error(t);return e}]}import React2,{createContext as createContext2,useContext as useContext2}from"react";import{useState}from"react";import{useEffect,useLayoutEffect}from"react";var[RatingProvider,useRatingContext]=createSafeContext("Rating was not found in tree");import React5 from"react";import{Box,useDirection}from"@raikou/core";import React4 from"react";import React3 from"react";function StarIcon(e){var{width:t,height:a,style:o}=e,e=__objRest(e,["width","height","style"]);return React3.createElement("svg",__spreadValues({viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:__spreadValues({width:t,height:a},o)},e),React3.createElement("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"}))}function StarSymbol({type:e}){var t=useRatingContext();return React4.createElement(StarIcon,__spreadProps(__spreadValues({},t.getStyles("starSymbol")),{"data-filled":"full"===e||void 0}))}function RatingItem(e){var{getSymbolLabel:t,emptyIcon:a,fullIcon:o,full:r,active:l,value:n,readOnly:s,fractionValue:u,id:i,onBlur:c,onChange:m,onInputChange:p}=e,e=__objRest(e,["size","getSymbolLabel","emptyIcon","fullIcon","full","active","value","readOnly","fractionValue","color","id","onBlur","onChange","onInputChange","style"]),d=useRatingContext(),o="function"==typeof o?o(n):o,a="function"==typeof a?a(n):a,f=useDirection()["dir"];return React5.createElement(React5.Fragment,null,!s&&React5.createElement("input",__spreadValues(__spreadProps(__spreadValues({},d.getStyles("input")),{onKeyDown:e=>" "===e.key&&m(n),id:i,type:"radio","data-active":l||void 0,"aria-label":null==t?void 0:t(n),value:n,onBlur:c,onChange:p}),e)),React5.createElement(Box,__spreadProps(__spreadValues({component:s?"div":"label"},d.getStyles("label")),{"data-read-only":s||void 0,htmlFor:i,onClick:()=>m(n),__vars:{"--rating-item-z-index":null==(t=1===u?void 0:l?2:0)?void 0:t.toString()}}),React5.createElement(Box,__spreadProps(__spreadValues({},d.getStyles("symbolBody")),{__vars:{"--rating-symbol-clip-path":1===u?void 0:"ltr"===f?`inset(0 ${l?100-100*u:100}% 0 0)`:`inset(0 0 0 ${l?100-100*u:100}% )`}}),r?o||React5.createElement(StarSymbol,{type:"full"}):a||React5.createElement(StarSymbol,{type:"empty"}))))}StarIcon.displayName="@raikou/core/StarIcon",StarSymbol.displayName="@raikou/core/StarSymbol",RatingItem.displayName="@raikou/core/RatingItem";var Rating_module_default={root:"m-f8d312f2",symbolGroup:"m-61734bb7",starSymbol:"m-5662a89a",input:"m-211007ba",label:"m-21342ee4",symbolBody:"m-fae05d6a"};function roundValueTo(e,t){e=Math.round(e/t)*t,t=(null==(t=(""+t).split(".")[1])?void 0:t.length)||0;return Number(e.toFixed(t))}var defaultProps={size:"sm",getSymbolLabel:e=>""+e,count:5,fractions:1,color:"yellow"},varsResolver=createVarsResolver((e,{size:t,color:a})=>({root:{"--rating-size":getSize(t,"rating-size"),"--rating-color":getThemeColor(a,e)}})),Rating=factory((e,t)=>{e=useProps("Rating",defaultProps,e);const a=e,{classNames:o,className:r,style:l,styles:n,unstyled:s,vars:u,name:i,id:c,value:m,defaultValue:p,onChange:d,fractions:f,count:y,onMouseEnter:_,readOnly:g,onMouseMove:v,onHover:b,onMouseLeave:R,onTouchStart:h,onTouchEnd:S,size:P,variant:L,getSymbolLabel:T,emptySymbol:j,fullSymbol:D,highlightSelectedOnly:F}=a,A=__objRest(a,["classNames","className","style","styles","unstyled","vars","name","id","value","defaultValue","onChange","fractions","count","onMouseEnter","readOnly","onMouseMove","onHover","onMouseLeave","onTouchStart","onTouchEnd","size","variant","getSymbolLabel","color","emptySymbol","fullSymbol","highlightSelectedOnly"]),w=useStyles({name:"Rating",classes:Rating_module_default,props:e,className:r,style:l,classNames:o,styles:n,unstyled:s,vars:u,varsResolver:varsResolver}),$=useDirection2()["dir"],G=useId(i),H=useId(c),O=useRef(null),[U,C]=useUncontrolled({value:m,defaultValue:p,finalValue:0,onChange:d}),[E,x]=useState2(-1),[X,I]=useState2(!0),V=Math.floor(f),M=Math.floor(y),k=1/V,B=roundValueTo(U,k),N=-1!==E?E:B,z=e=>{var{left:t,right:a,width:o}=O.current.getBoundingClientRect(),o=o/M,a="rtl"===$?a-e:e-t;return clamp(roundValueTo(a/o+k/2,k),k,M)};const K=()=>X&&x(-1),q=e=>{g||("number"==typeof e?x(e):x(parseFloat(e.target.value)))},J=e=>{g||("number"==typeof e?C(e):C(parseFloat(e.target.value)))};e=Array(M).fill(0).map((e,r)=>{const l=r+1;var t=Array.from(new Array(0===r?V+1:V)),a=!g&&Math.ceil(E)===l;return React6.createElement("div",__spreadValues({key:l,"data-active":a||void 0},w("symbolGroup")),t.map((e,t)=>{var a=k*(0===r?t:t+1),o=roundValueTo(l-1+a,k);return React6.createElement(RatingItem,{key:l+"-"+o,size:P,getSymbolLabel:T,emptyIcon:j,fullIcon:D,full:F?o===N:o<=N,active:o===N,checked:o===B,readOnly:g,fractionValue:a,value:o,name:G,onChange:J,onBlur:K,onInputChange:q,id:H+`-${r}-`+t})}))});return React6.createElement(RatingProvider,{value:{getStyles:w}},React6.createElement(Box2,__spreadValues(__spreadProps(__spreadValues({ref:useMergedRef(O,t)},w("root")),{onMouseMove:e=>{null!=v&&v(e),g||(e=z(e.clientX),x(e),e!==E&&null!=b&&b(e))},onMouseEnter:e=>{null!=_&&_(e),g||I(!1)},onMouseLeave:e=>{null!=R&&R(e),g||(x(-1),I(!0),-1!==E&&null!=b&&b(-1))},onTouchStart:e=>{e.preventDefault();var t=e["touches"];1===t.length&&(t=t[0],C(z(t.clientX)),null!=h)&&h(e)},onTouchEnd:e=>{e.preventDefault(),null!=S&&S(e)},variant:L,size:P}),A),e))});Rating.classes=Rating_module_default,Rating.displayName="@raikou/core/Rating";export{Rating};