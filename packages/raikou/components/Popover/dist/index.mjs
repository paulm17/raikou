var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,r,o)=>r in e?__defProp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,__spreadValues=(e,r)=>{for(var o in r=r||{})__hasOwnProp.call(r,o)&&__defNormalProp(e,o,r[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(r))__propIsEnum.call(r,o)&&__defNormalProp(e,o,r[o]);return e},__spreadProps=(e,r)=>__defProps(e,__getOwnPropDescs(r)),__objRest=(e,r)=>{var o={};for(t in e)__hasOwnProp.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))r.indexOf(t)<0&&__propIsEnum.call(e,t)&&(o[t]=e[t]);return o};import React10,{useRef as useRef3,useState as useState5,useCallback}from"react";import{useId,useClickOutside}from"@raikou/hooks";import{getDefaultZIndex,useProps as useProps4,useDirection as useDirection2,useStyles,createVarsResolver,getRadius,getShadow}from"@raikou/core";import{useState,useEffect}from"react";import{autoUpdate}from"@floating-ui/react";import{useDidUpdate}from"@raikou/hooks";function useFloatingAutoUpdate({opened:e,floating:r,position:o,positionDependencies:t}){const[a,n]=useState(0);useEffect(()=>{if(r.refs.reference.current&&r.refs.floating.current)return autoUpdate(r.refs.reference.current,r.refs.floating.current,r.update)},[r.refs.reference.current,r.refs.floating.current,e,a,o]),useDidUpdate(()=>{r.update()},t),useDidUpdate(()=>{n(e=>e+1)},[e])}function getFloatingPosition(e,r){var o;return"rtl"===e&&(r.includes("right")||r.includes("left"))?([e,o]=r.split("-"),e="right"===e?"left":"right",void 0===o?e:e+"-"+o):r}import React,{forwardRef}from"react";import{useDirection}from"@raikou/core";import{rem}from"@raikou/core";function horizontalSide(e,r,o,t){return"center"===e||"center"===t?{top:r}:"end"===e?{bottom:o}:"start"===e?{top:o}:{}}function verticalSide(e,r,o,t,a){return"center"===e||"center"===t?{left:r}:"end"===e?{["ltr"===a?"right":"left"]:o}:"start"===e?{["ltr"===a?"left":"right"]:o}:{}}var radiusByFloatingSide={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function getArrowPositionStyles({position:e,arrowSize:r,arrowOffset:o,arrowRadius:t,arrowPosition:a,arrowX:n,arrowY:s,dir:i}){var[e,l="center"]=e.split("-"),t={width:rem(r),height:rem(r),transform:"rotate(45deg)",position:"absolute",[radiusByFloatingSide[e]]:rem(t)},r=rem(-r/2);return"left"===e?__spreadProps(__spreadValues(__spreadValues({},t),horizontalSide(l,s,o,a)),{right:r,borderLeftColor:"transparent",borderBottomColor:"transparent"}):"right"===e?__spreadProps(__spreadValues(__spreadValues({},t),horizontalSide(l,s,o,a)),{left:r,borderRightColor:"transparent",borderTopColor:"transparent"}):"top"===e?__spreadProps(__spreadValues(__spreadValues({},t),verticalSide(l,n,o,a,i)),{bottom:r,borderTopColor:"transparent",borderLeftColor:"transparent"}):"bottom"===e?__spreadProps(__spreadValues(__spreadValues({},t),verticalSide(l,n,o,a,i)),{top:r,borderBottomColor:"transparent",borderRightColor:"transparent"}):{}}var FloatingArrow=forwardRef((e,r)=>{var{position:o,arrowSize:t,arrowOffset:a,arrowRadius:n,arrowPosition:s,visible:i,arrowX:l,arrowY:p,style:u}=e,e=__objRest(e,["position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY","style"]),d=useDirection()["dir"];return i?React.createElement("div",__spreadProps(__spreadValues({},e),{ref:r,style:__spreadValues(__spreadValues({},u),getArrowPositionStyles({position:o,arrowSize:t,arrowOffset:a,arrowRadius:n,arrowPosition:s,dir:d,arrowX:l,arrowY:p}))})):null});FloatingArrow.displayName="@raikou/core/FloatingArrow";import{useDidUpdate as useDidUpdate2,useUncontrolled}from"@raikou/hooks";import{useFloating,shift,flip,arrow,offset,size,inline,limitShift}from"@floating-ui/react";function getPopoverMiddlewares(n,s){var e,r=[offset(n.offset)];return null!=(e=n.middlewares)&&e.shift&&r.push(shift({limiter:limitShift()})),null!=(e=n.middlewares)&&e.flip&&r.push(flip()),null!=(e=n.middlewares)&&e.inline&&r.push(inline()),r.push(arrow({element:n.arrowRef,padding:n.arrowOffset})),(null!=(e=n.middlewares)&&e.size||"target"===n.width)&&r.push(size({apply({rects:e,availableWidth:r,availableHeight:o}){var t,a=null!=(a=null==(a=s().refs.floating.current)?void 0:a.style)?a:{};null!=(t=n.middlewares)&&t.size&&Object.assign(a,{maxWidth:r+"px",maxHeight:o+"px"}),"target"===n.width&&Object.assign(a,{width:e.reference.width+"px"})}})),r}function usePopover(r){const[o,t]=useUncontrolled({value:r.opened,defaultValue:r.defaultOpened,finalValue:!1,onChange:r.onChange});const a=useFloating({placement:r.position,middleware:getPopoverMiddlewares(r,()=>a)});return useFloatingAutoUpdate({opened:r.opened,position:r.position,positionDependencies:r.positionDependencies||[],floating:a}),useDidUpdate2(()=>{var e;null!=(e=r.onPositionChange)&&e.call(r,a.placement)},[a.placement]),useDidUpdate2(()=>{var e;r.opened?null!=(e=r.onOpen)&&e.call(r):null!=(e=r.onClose)&&e.call(r)},[r.opened]),{floating:a,controlled:"boolean"==typeof r.opened,opened:o,onClose:()=>{var e;o&&(null!=(e=r.onClose)&&e.call(r),t(!1))},onToggle:()=>{var e;o?(null!=(e=r.onClose)&&e.call(r),t(!1)):(null!=(e=r.onOpen)&&e.call(r),t(!0))}}}import React2,{createContext,useContext}from"react";function createSafeContext(r){const o=createContext(null);return[({children:e,value:r})=>React2.createElement(o.Provider,{value:r},e),()=>{var e=useContext(o);if(null===e)throw new Error(r);return e}]}import React3,{createContext as createContext2,useContext as useContext2}from"react";import{useState as useState2}from"react";import{useEffect as useEffect2,useLayoutEffect}from"react";var[PopoverContextProvider,usePopoverContext]=createSafeContext("Popover component was not found in the tree");import{cloneElement}from"react";import cx from"clsx";import{useMergedRef}from"@raikou/hooks";import{isElement,useProps,factory}from"@raikou/core";var defaultProps={refProp:"ref",popupType:"dialog"},PopoverTarget=factory((e,r)=>{var o,e=useProps("PopoverTarget",defaultProps,e),{children:t,refProp:a,popupType:n}=e,e=__objRest(e,["children","refProp","popupType"]);if(isElement(t))return e=e,o=usePopoverContext(),r=useMergedRef(o.reference,t.ref,r),n=o.withRoles?{"aria-haspopup":n,"aria-expanded":o.opened,"aria-controls":o.getDropdownId(),id:o.getTargetId()}:{},cloneElement(t,__spreadValues(__spreadProps(__spreadValues(__spreadValues(__spreadValues({},e),n),o.targetProps),{className:cx(o.targetProps.className,e.className,t.props.className),[a]:r}),o.controlled?null:{onClick:o.onToggle}));throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported")});PopoverTarget.displayName="@raikou/core/PopoverTarget";import React9 from"react";import{useFocusReturn,useMergedRef as useMergedRef3}from"@raikou/hooks";import{Box,factory as factory2,useProps as useProps3,rem as rem3,closeOnEscape}from"@raikou/core";import React5,{useRef,useState as useState3,forwardRef as forwardRef2}from"react";import{createPortal}from"react-dom";import{useIsomorphicEffect,assignRef}from"@raikou/hooks";import{useProps as useProps2}from"@raikou/core";function createPortalNode(e){var r=document.createElement("div");return r.setAttribute("data-portal","true"),"string"==typeof e.className&&r.classList.add(...e.className.split(" ")),"object"==typeof e.style&&Object.assign(r.style,e.style),"string"==typeof e.id&&r.setAttribute("id",e.id),r}var defaultProps2={},Portal=forwardRef2((e,r)=>{const o=useProps2("Portal",defaultProps2,e),{children:t,target:a}=o,n=__objRest(o,["children","target"]),[s,i]=useState3(!1),l=useRef(null);return useIsomorphicEffect(()=>(i(!0),l.current=a?"string"==typeof a?document.querySelector(a):a:createPortalNode(n),assignRef(r,l.current),!a&&l.current&&document.body.appendChild(l.current),()=>{!a&&l.current&&document.body.removeChild(l.current)}),[a]),s&&l.current?createPortal(React5.createElement(React5.Fragment,null,t),l.current):null});Portal.displayName="@raikou/core/Portal";import React6 from"react";function OptionalPortal(e){var{withinPortal:r=!0,children:o}=e,e=__objRest(e,["withinPortal","children"]);return r?React6.createElement(Portal,__spreadValues({},e),o):React6.createElement(React6.Fragment,null,o)}OptionalPortal.displayName="@raikou/core/OptionalPortal";import{rem as rem2}from"@raikou/core";var popIn={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${rem2(10)})`},transitionProperty:"transform, opacity"},transitions={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(-${rem2(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${rem2(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${rem2(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${rem2(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:__spreadProps(__spreadValues({},popIn),{common:{transformOrigin:"center center"}}),"pop-bottom-left":__spreadProps(__spreadValues({},popIn),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":__spreadProps(__spreadValues({},popIn),{common:{transformOrigin:"bottom right"}}),"pop-top-left":__spreadProps(__spreadValues({},popIn),{common:{transformOrigin:"top left"}}),"pop-top-right":__spreadProps(__spreadValues({},popIn),{common:{transformOrigin:"top right"}})};import React7 from"react";var transitionStatuses={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function getTransitionStyles({transition:e,state:r,duration:o,timingFunction:t}){o={transitionDuration:o+"ms",transitionTimingFunction:t};return"string"==typeof e?e in transitions?__spreadValues(__spreadValues(__spreadValues({transitionProperty:transitions[e].transitionProperty},o),transitions[e].common),transitions[e][transitionStatuses[r]]):{}:__spreadValues(__spreadValues(__spreadValues({transitionProperty:e.transitionProperty},o),e.common),e[transitionStatuses[r]])}import{useState as useState4,useEffect as useEffect3,useRef as useRef2}from"react";import{useReducedMotion,useDidUpdate as useDidUpdate3}from"@raikou/hooks";import{useRaikouTheme}from"@raikou/core";function useTransition({duration:n,exitDuration:s,timingFunction:e,mounted:i,onEnter:l,onExit:p,onEntered:u,onExited:d}){var r=useRaikouTheme(),o=useReducedMotion();const c=!!r.respectReducedMotion&&o,[t,f]=useState4(c?0:n),[a,m]=useState4(i?"entered":"exited"),g=useRef2(-1);return useDidUpdate3(()=>{{var e=i;const o=e?l:p,t=e?u:d;m(e?"pre-entering":"pre-exiting"),window.clearTimeout(g.current);var r=c?0:e?n:s;if(f(r),0===r)"function"==typeof o&&o(),"function"==typeof t&&t(),m(e?"entered":"exited");else{const a=window.setTimeout(()=>{"function"==typeof o&&o(),m(e?"entering":"exiting")},10);g.current=window.setTimeout(()=>{window.clearTimeout(a),"function"==typeof t&&t(),m(e?"entered":"exited")},r)}}},[i]),useEffect3(()=>()=>window.clearTimeout(g.current),[]),{transitionDuration:t,transitionStatus:a,transitionTimingFunction:e||"ease"}}function Transition({keepMounted:e,transition:r="fade",duration:o=250,exitDuration:t=o,mounted:a,children:n,timingFunction:s="ease",onExit:i,onEntered:l,onEnter:p,onExited:u}){var{transitionDuration:t,transitionStatus:s,transitionTimingFunction:i}=useTransition({mounted:a,exitDuration:t,duration:o,timingFunction:s,onExit:i,onEntered:l,onEnter:p,onExited:u});return 0===t?a?React7.createElement(React7.Fragment,null,n({})):e?n({display:"none"}):null:"exited"===s?e?n({display:"none"}):null:React7.createElement(React7.Fragment,null,n(getTransitionStyles({transition:r,duration:t,state:s,timingFunction:i})))}Transition.displayName="@raikou/core/Transition";import{cloneElement as cloneElement2}from"react";import{useFocusTrap,useMergedRef as useMergedRef2}from"@raikou/hooks";import{isElement as isElement2}from"@raikou/core";function FocusTrap({children:e,active:r=!0,refProp:o="ref"}){r=useFocusTrap(r),r=useMergedRef2(r,null==e?void 0:e.ref);return isElement2(e)?cloneElement2(e,{[o]:r}):e}FocusTrap.displayName="@raikou/core/FocusTrap";var defaultProps3={},PopoverDropdown=factory2((e,r)=>{const o=useProps3("PopoverDropdown",defaultProps3,e),t=o,{className:a,style:n,children:s,onKeyDownCapture:i,variant:l,classNames:p,styles:u}=t,d=__objRest(t,["className","style","vars","children","onKeyDownCapture","variant","classNames","styles"]),c=usePopoverContext(),f=useFocusReturn({opened:c.opened,shouldReturnFocus:c.returnFocus}),m=c.withRoles?{"aria-labelledby":c.getTargetId(),id:c.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=useMergedRef3(r,c.floating);return c.disabled?null:React9.createElement(OptionalPortal,__spreadProps(__spreadValues({},c.portalProps),{withinPortal:c.withinPortal}),React9.createElement(Transition,__spreadProps(__spreadValues({mounted:c.opened},c.transitionProps),{transition:(null==(e=c.transitionProps)?void 0:e.transition)||"fade",duration:null!=(e=null==(r=c.transitionProps)?void 0:r.duration)?e:150,keepMounted:c.keepMounted,exitDuration:"number"==typeof(null==(r=c.transitionProps)?void 0:r.exitDuration)?c.transitionProps.exitDuration:null==(e=c.transitionProps)?void 0:e.duration}),e=>{return React9.createElement(FocusTrap,{active:c.trapFocus},React9.createElement(Box,__spreadValues(__spreadProps(__spreadValues(__spreadValues({},m),d),{variant:l,ref:g,onKeyDownCapture:closeOnEscape(c.onClose,{active:c.closeOnEscape,onTrigger:f,onKeyDown:i}),"data-position":c.placement}),c.getStyles("dropdown",{className:a,props:o,classNames:p,styles:u,style:[__spreadProps(__spreadValues({},e),{zIndex:c.zIndex,top:null!=(e=c.y)?e:0,left:null!=(e=c.x)?e:0,width:"target"===c.width?void 0:rem3(c.width)}),n]})),s,React9.createElement(FloatingArrow,__spreadValues({ref:c.arrowRef,arrowX:c.arrowX,arrowY:c.arrowY,visible:c.withArrow,position:c.placement,arrowSize:c.arrowSize,arrowRadius:c.arrowRadius,arrowOffset:c.arrowOffset,arrowPosition:c.arrowPosition},c.getStyles("arrow",{props:o,classNames:p,styles:u})))))}))}),Popover_module_default=(PopoverDropdown.displayName="@raikou/core/PopoverDropdown",{dropdown:"m-38a85659",arrow:"m-a31dc6c1"}),defaultProps4={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:getDefaultZIndex("popover"),__staticSelector:"Popover",width:"max-content"},varsResolver=createVarsResolver((e,{radius:r,shadow:o})=>({dropdown:{"--popover-radius":void 0===r?void 0:getRadius(r),"--popover-shadow":getShadow(o)}}));function Popover(e){e=useProps4("Popover",defaultProps4,e);const r=e,{children:o,position:t,offset:a,onPositionChange:n,positionDependencies:s,opened:i,transitionProps:l,width:p,middlewares:u,withArrow:d,arrowSize:c,arrowOffset:f,arrowRadius:m,arrowPosition:g,unstyled:w,classNames:P,styles:_,closeOnClickOutside:y,withinPortal:v,portalProps:h,closeOnEscape:R,clickOutsideEvents:O,trapFocus:b,onClose:x,onOpen:S,onChange:E,zIndex:k,radius:C,shadow:z,id:Y,defaultOpened:M,__staticSelector:D,withRoles:j,disabled:U,returnFocus:A,variant:X,keepMounted:B,vars:L}=r,$=__objRest(r,["children","position","offset","onPositionChange","positionDependencies","opened","transitionProps","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","portalProps","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","__staticSelector","withRoles","disabled","returnFocus","variant","keepMounted","vars"]);var e=useStyles({name:D,props:e,classes:Popover_module_default,classNames:P,styles:_,unstyled:w,rootSelector:"dropdown",vars:L,varsResolver:varsResolver}),T=useRef3(null);const[K,H]=useState5(null),[W,Z]=useState5(null);var F=useDirection2()["dir"];const V=useId(Y),N=usePopover({middlewares:u,width:p,position:getFloatingPosition(F,t),offset:"number"==typeof a?a+(d?c/2:0):a,arrowRef:T,arrowOffset:f,onPositionChange:n,positionDependencies:s,opened:i,defaultOpened:M,onChange:E,onOpen:S,onClose:x});useClickOutside(()=>y&&N.onClose(),O,[K,W]);var F=useCallback(e=>{H(e),N.floating.reference(e)},[N.floating.reference]),I=useCallback(e=>{Z(e),N.floating.floating(e)},[N.floating.floating]);return React10.createElement(PopoverContextProvider,{value:{returnFocus:A,disabled:U,controlled:N.controlled,reference:F,floating:I,x:N.floating.x,y:N.floating.y,arrowX:null==(F=null==(I=null==(F=N.floating)?void 0:F.middlewareData)?void 0:I.arrow)?void 0:F.x,arrowY:null==(I=null==(F=null==(I=N.floating)?void 0:I.middlewareData)?void 0:F.arrow)?void 0:I.y,opened:N.opened,arrowRef:T,transitionProps:l,width:p,withArrow:d,arrowSize:c,arrowOffset:f,arrowRadius:m,arrowPosition:g,placement:N.floating.placement,trapFocus:b,withinPortal:v,portalProps:h,zIndex:k,radius:C,shadow:z,closeOnEscape:R,onClose:N.onClose,onToggle:N.onToggle,getTargetId:()=>V+"-target",getDropdownId:()=>V+"-dropdown",withRoles:j,targetProps:$,__staticSelector:D,classNames:P,styles:_,unstyled:w,variant:X,keepMounted:B,getStyles:e}},o)}Popover.Target=PopoverTarget,Popover.Dropdown=PopoverDropdown,Popover.displayName="@raikou/core/Popover",Popover.extend=e=>e;export{Popover,PopoverDropdown,PopoverTarget};