"use strict";var __create=Object.create,__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__pow=Math.pow,__defNormalProp=(e,r,o)=>r in e?__defProp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,__spreadValues=(e,r)=>{for(var o in r=r||{})__hasOwnProp.call(r,o)&&__defNormalProp(e,o,r[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(r))__propIsEnum.call(r,o)&&__defNormalProp(e,o,r[o]);return e},__spreadProps=(e,r)=>__defProps(e,__getOwnPropDescs(r)),__objRest=(e,r)=>{var o={};for(t in e)__hasOwnProp.call(e,t)&&r.indexOf(t)<0&&(o[t]=e[t]);if(null!=e&&__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))r.indexOf(t)<0&&__propIsEnum.call(e,t)&&(o[t]=e[t]);return o},__export=(e,r)=>{for(var o in r)__defProp(e,o,{get:r[o],enumerable:!0})},__copyProps=(r,o,t,n)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let e of __getOwnPropNames(o))__hasOwnProp.call(r,e)||e===t||__defProp(r,e,{get:()=>o[e],enumerable:!(n=__getOwnPropDesc(o,e))||n.enumerable});return r},__toESM=(e,r,o)=>(o=null!=e?__create(__getProtoOf(e)):{},__copyProps(!r&&e&&e.__esModule?o:__defProp(o,"default",{value:e,enumerable:!0}),e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),src_exports={},import_react2=(__export(src_exports,{Collapse:()=>Collapse}),module.exports=__toCommonJS(src_exports),__toESM(require("react"))),import_hooks2=require("@raikou/hooks"),import_core=require("@raikou/core"),import_react=require("react"),import_react_dom=require("react-dom"),import_hooks=require("@raikou/hooks");function getAutoHeightDuration(e){return e&&"string"!=typeof e?(e=e/36,Math.round(10*(4+15*__pow(e,.25)+e/5))):0}function getElementHeight(e){return null!=e&&e.current?e.current.scrollHeight:"auto"}var raf="undefined"!=typeof window&&window.requestAnimationFrame;function useCollapse({transitionDuration:r,transitionTimingFunction:o="ease",onTransitionEnd:t=()=>{},opened:n}){const i=(0,import_react.useRef)(null),a=0,_={display:"none",height:0,overflow:"hidden"},[s,p]=(0,import_react.useState)(n?{}:_),l=e=>{(0,import_react_dom.flushSync)(()=>p(e))},u=r=>{l(e=>__spreadValues(__spreadValues({},e),r))};function c(e){return{transition:`height ${r||getAutoHeightDuration(e)}ms `+o}}(0,import_hooks.useDidUpdate)(()=>{"function"==typeof raf&&raf(n?()=>{u({willChange:"height",display:"block",overflow:"hidden"}),raf(()=>{var e=getElementHeight(i);u(__spreadProps(__spreadValues({},c(e)),{height:e}))})}:()=>{var e=getElementHeight(i);u(__spreadProps(__spreadValues({},c(e)),{willChange:"height",height:e})),raf(()=>u({height:a,overflow:"hidden"}))})},[n]);const d=e=>{e.target===i.current&&"height"===e.propertyName&&(n?((e=getElementHeight(i))===s.height?l({}):u({height:e}),t()):s.height===a&&(l(_),t()))};return function(e={}){var{style:r={},refKey:o="ref"}=e,t=(e=__objRest(e,["style","refKey"]))[o];return __spreadProps(__spreadValues({"aria-hidden":!n},e),{[o]:(0,import_hooks.mergeRefs)(i,t),onTransitionEnd:d,style:__spreadValues(__spreadValues({boxSizing:"border-box"},r),s)})}}var defaultProps={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Collapse=(0,import_core.factory)((e,r)=>{var e=(0,import_core.useProps)("Collapse",defaultProps,e),{children:o,in:t,transitionDuration:n,transitionTimingFunction:i,style:a,onTransitionEnd:_,animateOpacity:s}=e,e=__objRest(e,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity"]),p=(0,import_core.useRaikouTheme)(),l=(0,import_hooks2.useReducedMotion)(),l=!!p.respectReducedMotion&&l?0:n,n=useCollapse({opened:t,transitionDuration:l,transitionTimingFunction:i,onTransitionEnd:_});return 0===l?t?import_react2.default.createElement(import_core.Box,__spreadValues({},e),o):null:import_react2.default.createElement(import_core.Box,__spreadValues({},n(__spreadValues({style:(0,import_core.getStyleObject)(a,p),ref:r},e))),import_react2.default.createElement("div",{style:{opacity:t||!s?1:0,transition:s?`opacity ${l}ms `+i:"none"}},o))});Collapse.displayName="@raikou/core/Collapse";