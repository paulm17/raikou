var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__pow=Math.pow,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t=t||{})__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var r={};for(o in e)__hasOwnProp.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))t.indexOf(o)<0&&__propIsEnum.call(e,o)&&(r[o]=e[o]);return r};import React2 from"react";import{useReducedMotion}from"@raikou/hooks";import{useProps,Box,getStyleObject,factory,useRaikouTheme}from"@raikou/core";import{useState,useRef}from"react";import{flushSync}from"react-dom";import{useDidUpdate,mergeRefs}from"@raikou/hooks";function getAutoHeightDuration(e){return e&&"string"!=typeof e?(e=e/36,Math.round(10*(4+15*__pow(e,.25)+e/5))):0}function getElementHeight(e){return null!=e&&e.current?e.current.scrollHeight:"auto"}var raf="undefined"!=typeof window&&window.requestAnimationFrame;function useCollapse({transitionDuration:t,transitionTimingFunction:r="ease",onTransitionEnd:o=()=>{},opened:n}){const a=useRef(null),i=0,s={display:"none",height:0,overflow:"hidden"},[p,l]=useState(n?{}:s),u=e=>{flushSync(()=>l(e))},_=t=>{u(e=>__spreadValues(__spreadValues({},e),t))};function d(e){return{transition:`height ${t||getAutoHeightDuration(e)}ms `+r}}useDidUpdate(()=>{"function"==typeof raf&&raf(n?()=>{_({willChange:"height",display:"block",overflow:"hidden"}),raf(()=>{var e=getElementHeight(a);_(__spreadProps(__spreadValues({},d(e)),{height:e}))})}:()=>{var e=getElementHeight(a);_(__spreadProps(__spreadValues({},d(e)),{willChange:"height",height:e})),raf(()=>_({height:i,overflow:"hidden"}))})},[n]);const c=e=>{e.target===a.current&&"height"===e.propertyName&&(n?((e=getElementHeight(a))===p.height?u({}):_({height:e}),o()):p.height===i&&(u(s),o()))};return function(e={}){var{style:t={},refKey:r="ref"}=e,o=(e=__objRest(e,["style","refKey"]))[r];return __spreadProps(__spreadValues({"aria-hidden":!n},e),{[r]:mergeRefs(a,o),onTransitionEnd:c,style:__spreadValues(__spreadValues({boxSizing:"border-box"},t),p)})}}var defaultProps={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Collapse=factory((e,t)=>{var e=useProps("Collapse",defaultProps,e),{children:r,in:o,transitionDuration:n,transitionTimingFunction:a,style:i,onTransitionEnd:s,animateOpacity:p}=e,e=__objRest(e,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity"]),l=useRaikouTheme(),u=useReducedMotion(),u=!!l.respectReducedMotion&&u?0:n,n=useCollapse({opened:o,transitionDuration:u,transitionTimingFunction:a,onTransitionEnd:s});return 0===u?o?React2.createElement(Box,__spreadValues({},e),r):null:React2.createElement(Box,__spreadValues({},n(__spreadValues({style:getStyleObject(i,l),ref:t},e))),React2.createElement("div",{style:{opacity:o||!p?1:0,transition:p?`opacity ${u}ms `+a:"none"}},r))});Collapse.displayName="@raikou/core/Collapse";export{Collapse};