var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__pow=Math.pow,__defNormalProp=(e,r,a)=>r in e?__defProp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,__spreadValues=(e,r)=>{for(var a in r=r||{})__hasOwnProp.call(r,a)&&__defNormalProp(e,a,r[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(r))__propIsEnum.call(r,a)&&__defNormalProp(e,a,r[a]);return e},__spreadProps=(e,r)=>__defProps(e,__getOwnPropDescs(r)),__objRest=(e,r)=>{var a={};for(s in e)__hasOwnProp.call(e,s)&&r.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))r.indexOf(s)<0&&__propIsEnum.call(e,s)&&(a[s]=e[s]);return a};import React10,{useRef as useRef3,useState as useState4}from"react";import{useDidUpdate as useDidUpdate2,useUncontrolled}from"@raikou/hooks";import{Box as Box6,factory as factory2,useProps as useProps5,useStyles as useStyles3,getSize,getSpacing,createVarsResolver as createVarsResolver3}from"@raikou/core";import React5,{forwardRef as forwardRef2}from"react";import{useProps as useProps2,rem as rem2}from"@raikou/core";import React4,{useRef,useState as useState2}from"react";import{clampUseMovePosition,useDidUpdate,useMergedRef,useMove}from"@raikou/hooks";import{Box as Box2,factory,useProps,useStyles,createVarsResolver,useRaikouTheme,rem}from"@raikou/core";var ColorPicker_module_default={wrapper:"m-fee9c77",preview:"m-9dddfbac",body:"m-bffecc3e",sliders:"m-3283bb96",thumb:"m-40d572ba",swatch:"m-d8ee6fd8",swatches:"m-5711e686",saturation:"m-202a296e",saturationOverlay:"m-11b3db02",slider:"m-d856d47d",sliderOverlay:"m-8f327113"};import React,{createContext,useContext}from"react";import React2,{createContext as createContext2,useContext as useContext2}from"react";function createOptionalContext(e=null){const a=createContext2(e);return[({children:e,value:r})=>React2.createElement(a.Provider,{value:r},e),()=>useContext2(a)]}import{useState}from"react";import{useEffect,useLayoutEffect}from"react";var[ColorPickerProvider,useColorPickerContext]=createOptionalContext(null);import React3,{forwardRef}from"react";import{Box}from"@raikou/core";var Thumb=forwardRef((e,r)=>{var a=e["position"],e=__objRest(e,["className","style","position"]);return React3.createElement(Box,__spreadValues({ref:r,__vars:{"--_thumb-y-offset":100*a.y+"%","--_thumb-x-offset":100*a.x+"%"}},e))}),defaultProps=(Thumb.displayName="@raikou/core/ColorPickerThumb",{}),varsResolver=createVarsResolver(()=>({root:{"--test":"test"}})),ColorSlider=factory((e,r)=>{e=useProps("ColorSlider",defaultProps,e);const a=e,{classNames:s,className:o,style:t,styles:l,unstyled:n,vars:u,onChange:c,onChangeEnd:d,maxValue:i,round:p,size:m="md",focusable:h=!0,value:v,overlays:f,thumbColor:_="transparent",onScrubStart:b,onScrubEnd:g,__staticSelector:y="ColorPicker"}=a,R=__objRest(a,["classNames","className","style","styles","unstyled","vars","onChange","onChangeEnd","maxValue","round","size","focusable","value","overlays","thumbColor","onScrubStart","onScrubEnd","__staticSelector"]);e=useStyles({name:y,classes:ColorPicker_module_default,props:e,className:o,style:t,classNames:s,styles:l,unstyled:n,vars:u,varsResolver:varsResolver});const S=(null==(w=useColorPickerContext())?void 0:w.getStyles)||e;var w=useRaikouTheme();const[C,P]=useState2({y:0,x:v/i}),x=useRef(C),E=e=>p?Math.round(e*i):e*i;e=useMove(({x:e,y:r})=>{x.current={x:e,y:r},null!=c&&c(E(e))},{onScrubEnd:()=>{var e=x.current["x"];null!=d&&d(E(e)),null!=g&&g()},onScrubStart:b}).ref;useDidUpdate(()=>{P({y:0,x:v/i})},[v]);const k=(e,r)=>{e.preventDefault();e=clampUseMovePosition(r);null!=c&&c(E(e.x)),null!=d&&d(E(e.x))};var V=f.map((e,r)=>React4.createElement("div",__spreadProps(__spreadValues({},S("sliderOverlay")),{style:e,key:r})));return React4.createElement(Box2,__spreadProps(__spreadValues(__spreadProps(__spreadValues({},R),{ref:useMergedRef(e,r)}),S("slider")),{role:"slider","aria-valuenow":v,"aria-valuemax":i,"aria-valuemin":0,tabIndex:h?0:-1,onKeyDown:e=>{switch(e.key){case"ArrowRight":k(e,{x:C.x+.05,y:C.y});break;case"ArrowLeft":k(e,{x:C.x-.05,y:C.y})}},"data-focus-ring":w.focusRing,__vars:{"--_cp-thumb-size":`var(--cp-thumb-size-${m})`}}),V,React4.createElement(Thumb,__spreadValues({position:C},S("thumb",{style:{top:rem(1),background:_}}))))});function round(e,r=0,a=__pow(10,r)){return Math.round(a*e)/a}function hslaToHsva({h:e,s:r,l:a,a:s}){r*=(a<50?a:100-a)/100;return{h:e,s:0<r?2*r/(a+r)*100:0,v:a+r,a:s}}ColorSlider.displayName="@raikou/core/ColorSlider";var angleUnits={grad:.9,turn:360,rad:360/(2*Math.PI)};function parseHue(e,r="deg"){return Number(e)*(angleUnits[r]||1)}var HSL_REGEXP=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function parseHsla(e){e=HSL_REGEXP.exec(e);return e?hslaToHsva({h:parseHue(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}}function rgbaToHsva({r:e,g:r,b:a,a:s}){var o=Math.max(e,r,a),t=o-Math.min(e,r,a),a=t?o===e?(r-a)/t:o===r?2+(a-e)/t:4+(e-r)/t:0;return{h:round(60*(a<0?6+a:a),3),s:round(o?t/o*100:0,3),v:round(o/255*100,3),a:s}}function parseHex(e){e="#"===e[0]?e.slice(1):e;return 3===e.length?rgbaToHsva({r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}):rgbaToHsva({r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:1})}function parseHexa(e){var r,a,e="#"===e[0]?e.slice(1):e,s=e=>round(parseInt(e,16)/255,3);return a=4===e.length?(r=e.slice(0,3),s(e[3]+e[3])):(r=e.slice(0,6),s(e.slice(6,8))),__spreadProps(__spreadValues({},parseHex(r)),{a:a})}var RGB_REGEXP=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function parseRgba(e){e=RGB_REGEXP.exec(e);return e?rgbaToHsva({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}}var VALIDATION_REGEXP={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},CONVERTERS={hex:parseHex,hexa:parseHexa,rgb:parseRgba,rgba:parseRgba,hsl:parseHsla,hsla:parseHsla};function isColorValid(e){for(var[,r]of Object.entries(VALIDATION_REGEXP))if(r.test(e))return!0;return!1}function parseColor(e){if("string"==typeof e){if("transparent"===e)return{h:0,s:0,v:0,a:0};var r,a,s=e.trim();for([r,a]of Object.entries(VALIDATION_REGEXP))if(a.test(s))return CONVERTERS[r](s)}return{h:0,s:0,v:0,a:1}}var defaultProps2={},AlphaSlider=forwardRef2((e,r)=>{const a=useProps2("AlphaSlider",defaultProps2,e),{value:s,onChange:o,onChangeEnd:t,color:l}=a,n=__objRest(a,["value","onChange","onChangeEnd","color"]);return React5.createElement(ColorSlider,__spreadProps(__spreadValues({},n),{ref:r,value:s,onChange:e=>null==o?void 0:o(round(e,2)),onChangeEnd:e=>null==t?void 0:t(round(e,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--_slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--_slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--_slider-checkers) 75%), linear-gradient(-45deg, var(--raikou-color-body) 75%, var(--_slider-checkers) 75%)",backgroundSize:rem2(8)+" "+rem2(8),backgroundPosition:`0 0, 0 ${rem2(4)}, ${rem2(4)} -${rem2(4)}, -${rem2(4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${l})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${rem2(1)} inset, rgb(0, 0, 0, .15) 0 0 ${rem2(4)} inset`}]}))});AlphaSlider.displayName="@raikou/core/AlphaSlider";import React6,{forwardRef as forwardRef3}from"react";import{useProps as useProps3,rem as rem3}from"@raikou/core";var HueSlider=forwardRef3((e,r)=>{var e=useProps3("HueSlider",{},e),{value:a,onChange:s,onChangeEnd:o}=e,e=__objRest(e,["value","onChange","onChangeEnd","color"]);return React6.createElement(ColorSlider,__spreadProps(__spreadValues({},e),{ref:r,value:a,onChange:s,onChangeEnd:o,maxValue:360,thumbColor:`hsl(${a}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${rem3(1)} inset, rgb(0, 0, 0, .15) 0 0 ${rem3(4)} inset`}]}))});HueSlider.displayName="@raikou/core/HueSlider";import React7,{useEffect as useEffect2,useRef as useRef2,useState as useState3}from"react";import{clampUseMovePosition as clampUseMovePosition2,useMove as useMove2}from"@raikou/hooks";import{Box as Box3}from"@raikou/core";function hsvaToRgbaObject({h:e,s:r,v:a,a:s}){var e=e/360*6,r=r/100,a=a/100,o=Math.floor(e),t=a*(1-r),l=a*(1-(e-o)*r),e=a*(1-(1-e+o)*r),r=o%6;return{r:round(255*[a,l,t,t,e,a][r]),g:round(255*[e,a,a,l,t,t][r]),b:round(255*[t,t,e,a,a,l][r]),a:round(s,2)}}function hsvaToRgba(e,r){var{r:e,g:a,b:s,a:o}=hsvaToRgbaObject(e);return r?`rgba(${e}, ${a}, ${s}, ${round(o,2)})`:`rgb(${e}, ${a}, ${s})`}function hsvaToHsl({h:e,s:r,v:a,a:s},o){var t=(200-r)*a/100;const l=Math.round(e),n=Math.round(0<t&&t<200?r*a/100/(t<=100?t:200-t)*100:0),u=Math.round(t/2);return o?`hsla(${l}, ${n}%, ${u}%, ${round(s,2)})`:`hsl(${l}, ${n}%, ${u}%)`}function formatHexPart(e){e=e.toString(16);return e.length<2?"0"+e:e}function hsvaToHex(e){var{r:e,g:r,b:a}=hsvaToRgbaObject(e);return"#"+formatHexPart(e)+formatHexPart(r)+formatHexPart(a)}function hsvaToHexa(e){var r=Math.round(255*e.a);return""+hsvaToHex(e)+formatHexPart(r)}var CONVERTERS2={hex:hsvaToHex,hexa:e=>hsvaToHexa(e),rgb:e=>hsvaToRgba(e,!1),rgba:e=>hsvaToRgba(e,!0),hsl:e=>hsvaToHsl(e,!1),hsla:e=>hsvaToHsl(e,!0)};function convertHsvaTo(e,r){return r?e in CONVERTERS2?CONVERTERS2[e](r):CONVERTERS2.hex(r):"#000000"}function Saturation(e){var{onChange:a,onChangeEnd:s,value:r,saturationLabel:o,focusable:t=!0,color:l,onScrubStart:n,onScrubEnd:u}=e,e=__objRest(e,["className","onChange","onChangeEnd","value","saturationLabel","focusable","size","color","onScrubStart","onScrubEnd"]),c=useColorPickerContext()["getStyles"];const[d,i]=useState3({x:r.s/100,y:1-r.v/100}),p=useRef2(d);n=useMove2(({x:e,y:r})=>{p.current={x:e,y:r},a({s:Math.round(100*e),v:Math.round(100*(1-r))})},{onScrubEnd:()=>{var{x:e,y:r}=p.current;s({s:Math.round(100*e),v:Math.round(100*(1-r))}),null!=u&&u()},onScrubStart:n}).ref;useEffect2(()=>{i({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const m=(e,r)=>{e.preventDefault();e=clampUseMovePosition2(r);a({s:Math.round(100*e.x),v:Math.round(100*(1-e.y))}),s({s:Math.round(100*e.x),v:Math.round(100*(1-e.y))})};return React7.createElement(Box3,__spreadProps(__spreadValues(__spreadProps(__spreadValues({},c("saturation")),{ref:n}),e),{role:"slider","aria-label":o,"aria-valuenow":d.x,"aria-valuetext":convertHsvaTo("rgba",r),tabIndex:t?0:-1,onKeyDown:e=>{switch(e.key){case"ArrowUp":m(e,{y:d.y-.05,x:d.x});break;case"ArrowDown":m(e,{y:d.y+.05,x:d.x});break;case"ArrowRight":m(e,{x:d.x+.05,y:d.y});break;case"ArrowLeft":m(e,{x:d.x-.05,y:d.y})}}}),React7.createElement("div",__spreadValues({},c("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}}))),React7.createElement("div",__spreadValues({},c("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}}))),React7.createElement("div",__spreadValues({},c("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}}))),React7.createElement(Thumb,__spreadValues({position:d},c("thumb",{style:{backgroundColor:l}}))))}Saturation.displayName="@raikou/core/Saturation";import React9,{forwardRef as forwardRef4}from"react";import{Box as Box5}from"@raikou/core";import React8 from"react";import{Box as Box4,getRadius,polymorphicFactory,rem as rem4,useProps as useProps4,useStyles as useStyles2,createVarsResolver as createVarsResolver2}from"@raikou/core";var ColorSwatch_module_default={root:"m-de3d2490",colorOverlay:"m-862f3d1b",shadowOverlay:"m-98ae7f22",alphaOverlay:"m-95709ac0",childrenOverlay:"m-93e74e3"},defaultProps3={withShadow:!0},varsResolver2=createVarsResolver2((e,{radius:r,size:a})=>({root:{"--cs-radius":void 0===r?void 0:getRadius(r),"--cs-size":rem4(a)}})),ColorSwatch=polymorphicFactory((e,r)=>{var e=useProps4("ColorSwatch",defaultProps3,e),a=useProps4("ColorSwatch",defaultProps3,e),{classNames:s,className:o,style:t,styles:l,unstyled:n,vars:u,color:c,size:d,withShadow:i,children:p,variant:m}=a,a=__objRest(a,["classNames","className","style","styles","unstyled","vars","color","size","radius","withShadow","children","variant"]),e=useStyles2({name:"ColorSwatch",props:e,classes:ColorSwatch_module_default,className:o,style:t,classNames:s,styles:l,unstyled:n,vars:u,varsResolver:varsResolver2});return React8.createElement(Box4,__spreadValues(__spreadValues({ref:r,variant:m,size:d},e("root",{focusable:!0})),a),React8.createElement("span",__spreadValues({},e("alphaOverlay"))),i&&React8.createElement("span",__spreadValues({},e("shadowOverlay"))),React8.createElement("span",__spreadValues({},e("colorOverlay",{style:{backgroundColor:c}}))),React8.createElement("span",__spreadValues({},e("childrenOverlay")),p))}),Swatches=(ColorSwatch.displayName="@raikou/core/ColorSwatch",ColorSwatch.classes=ColorSwatch_module_default,forwardRef4((e,r)=>{var{setValue:a,onChangeEnd:s,focusable:o,data:t}=e,e=__objRest(e,["className","datatype","setValue","onChangeEnd","size","focusable","data","swatchesPerRow"]);const l=useColorPickerContext()["getStyles"];t=t.map((e,r)=>React9.createElement(ColorSwatch,__spreadProps(__spreadValues({},l("swatch")),{component:"button",type:"button",color:e,key:r,radius:"sm",onClick:()=>{a(e),null!=s&&s(e)},"aria-label":e,tabIndex:o?0:-1,"data-swatch":!0})));return React9.createElement(Box5,__spreadValues(__spreadProps(__spreadValues({},l("swatches")),{ref:r}),e),t)})),ColorPicker_module_default2=(Swatches.displayName="@raikou/core/Swatches",{wrapper:"m-fee9c77",preview:"m-9dddfbac",body:"m-bffecc3e",sliders:"m-3283bb96",thumb:"m-40d572ba",swatch:"m-d8ee6fd8",swatches:"m-5711e686",saturation:"m-202a296e",saturationOverlay:"m-11b3db02",slider:"m-d856d47d",sliderOverlay:"m-8f327113"}),defaultProps4={swatchesPerRow:7,withPicker:!0,focusable:!0,__staticSelector:"ColorPicker"},varsResolver3=createVarsResolver3((e,{size:r,swatchesPerRow:a})=>({wrapper:{"--cp-preview-size":getSize(r,"cp-preview-size"),"--cp-width":getSize(r,"cp-width"),"--cp-body-spacing":getSpacing(r),"--cp-swatch-size":100/a+"%","--cp-thumb-size":getSize(r,"cp-thumb-size"),"--cp-saturation-height":getSize(r,"cp-saturation-height")}})),ColorPicker=factory2((e,r)=>{e=useProps5("ColorPicker",defaultProps4,e);const a=e,{classNames:s,className:o,style:t,styles:l,unstyled:n,vars:u,format:c,value:d,defaultValue:i,onChange:p,onChangeEnd:m,withPicker:h,size:v,saturationLabel:f,hueLabel:_,alphaLabel:b,focusable:g,swatches:y,swatchesPerRow:R,fullWidth:S,onColorSwatchClick:w,__staticSelector:$}=a,I=__objRest(a,["classNames","className","style","styles","unstyled","vars","format","value","defaultValue","onChange","onChangeEnd","withPicker","size","saturationLabel","hueLabel","alphaLabel","focusable","swatches","swatchesPerRow","fullWidth","onColorSwatchClick","__staticSelector"]);e=useStyles3({name:$,props:e,classes:ColorPicker_module_default2,className:o,style:t,classNames:s,styles:l,unstyled:n,rootSelector:"wrapper",vars:u,varsResolver:varsResolver3});const C=useRef3(c),P=useRef3(),x=useRef3(-1),E=useRef3(!1);var k="hexa"===c||"rgba"===c||"hsla"===c;const[V,O,A]=useUncontrolled({value:d,defaultValue:i,finalValue:"#FFFFFF",onChange:p}),[N,T]=useState4(parseColor(V));var H=()=>{window.clearTimeout(x.current),E.current=!0},z=()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{E.current=!1},200)};const M=r=>{T(e=>{e=__spreadValues(__spreadValues({},e),r);return P.current=convertHsvaTo(C.current,e),e}),O(P.current)};return useDidUpdate2(()=>{isColorValid(d)&&!E.current&&T(parseColor(d))},[d]),useDidUpdate2(()=>{C.current=c,O(convertHsvaTo(c,N))},[c]),React10.createElement(ColorPickerProvider,{value:{getStyles:e}},React10.createElement(Box6,__spreadValues(__spreadProps(__spreadValues({ref:r},e("wrapper")),{size:v,mod:{"full-width":S}}),I),h&&React10.createElement(React10.Fragment,null,React10.createElement(Saturation,{value:N,onChange:M,onChangeEnd:({s:e,v:r})=>null==m?void 0:m(convertHsvaTo(C.current,__spreadProps(__spreadValues({},N),{s:e,v:r}))),color:V,size:v,focusable:g,saturationLabel:f,onScrubStart:H,onScrubEnd:z}),React10.createElement("div",__spreadValues({},e("body")),React10.createElement("div",__spreadValues({},e("sliders")),React10.createElement(HueSlider,{value:N.h,onChange:e=>M({h:e}),onChangeEnd:e=>null==m?void 0:m(convertHsvaTo(C.current,__spreadProps(__spreadValues({},N),{h:e}))),size:v,focusable:g,"aria-label":_,onScrubStart:H,onScrubEnd:z}),k&&React10.createElement(AlphaSlider,{value:N.a,onChange:e=>M({a:e}),onChangeEnd:e=>{null!=m&&m(convertHsvaTo(C.current,__spreadProps(__spreadValues({},N),{a:e})))},size:v,color:convertHsvaTo("hex",N),focusable:g,"aria-label":b,onScrubStart:H,onScrubEnd:z})),k&&React10.createElement(ColorSwatch,__spreadValues({color:V,radius:"sm",size:"var(--cp-preview-size)"},e("preview"))))),Array.isArray(y)&&React10.createElement(Swatches,{data:y,swatchesPerRow:R,focusable:g,setValue:O,onChangeEnd:e=>{var r=convertHsvaTo(c,parseColor(e));null!=w&&w(r),null!=m&&m(r),A||T(parseColor(e))}})))});ColorPicker.displayName="@raikou/core/ColorPicker",ColorPicker.classes=ColorPicker_module_default2;export{AlphaSlider,ColorPicker,HueSlider,convertHsvaTo,isColorValid,parseColor};