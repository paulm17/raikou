"use strict";var __create=Object.create,__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},__export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&"object"==typeof from||"function"==typeof from)for(let key of __getOwnPropNames(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=null!=mod?__create(__getProtoOf(mod)):{},__copyProps(!isNodeMode&&mod&&mod.__esModule?target:__defProp(target,"default",{value:mod,enumerable:!0}),mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod),src_exports={};__export(src_exports,{FORM_INDEX:()=>FORM_INDEX,Form:()=>Form,createFormContext:()=>createFormContext,hasLength:()=>hasLength,isEmail:()=>isEmail,isInRange:()=>isInRange,isNotEmpty:()=>isNotEmpty,joiResolver:()=>joiResolver,matches:()=>matches,matchesField:()=>matchesField,superstructResolver:()=>superstructResolver,useForm:()=>useForm,yupResolver:()=>yupResolver,zodResolver:()=>zodResolver}),module.exports=__toCommonJS(src_exports);var import_react=require("react"),import_fast_deep_equal=__toESM(require("fast-deep-equal"));function getInputOnChange(setValue){return val=>{if(val)if("function"==typeof val)setValue(val);else if("object"==typeof val&&"nativeEvent"in val){const{currentTarget:currentTarget}=val;currentTarget instanceof HTMLInputElement?"checkbox"===currentTarget.type?setValue(currentTarget.checked):setValue(currentTarget.value):(currentTarget instanceof HTMLTextAreaElement||currentTarget instanceof HTMLSelectElement)&&setValue(currentTarget.value)}else setValue(val);else setValue(val)}}function getSplittedPath(path){return"string"!=typeof path?[]:path.split(".")}function getPath(path,values){const splittedPath=getSplittedPath(path);if(0===splittedPath.length||"object"!=typeof values||null===values)return;let value=values[splittedPath[0]];for(let i=1;i<splittedPath.length&&void 0!==value;i+=1)value=value[splittedPath[i]];return value}var import_full=require("klona/full");function setPath(path,value,values){const splittedPath=getSplittedPath(path);if(0===splittedPath.length)return values;const cloned=(0,import_full.klona)(values);if(1===splittedPath.length)return cloned[splittedPath[0]]=value,cloned;let val=cloned[splittedPath[0]];for(let i=1;i<splittedPath.length-1;i+=1){if(void 0===val)return cloned;val=val[splittedPath[i]]}return val[splittedPath[splittedPath.length-1]]=value,cloned}function reorderPath(path,{from:from,to:to},values){const currentValue=getPath(path,values);if(!Array.isArray(currentValue))return values;const cloned=[...currentValue],item=currentValue[from];return cloned.splice(from,1),cloned.splice(to,0,item),setPath(path,cloned,values)}function insertPath(path,value,index,values){const currentValue=getPath(path,values);if(!Array.isArray(currentValue))return values;const cloned=[...currentValue];return cloned.splice("number"==typeof index?index:cloned.length,0,value),setPath(path,cloned,values)}function removePath(path,index,values){const currentValue=getPath(path,values);return Array.isArray(currentValue)?setPath(path,currentValue.filter(((_,itemIndex)=>itemIndex!==index)),values):values}function filterErrors(errors){return null===errors||"object"!=typeof errors?{}:Object.keys(errors).reduce(((acc,key)=>{const errorValue=errors[key];return null!=errorValue&&!1!==errorValue&&(acc[key]=errorValue),acc}),{})}function getValidationResults(errors){const filteredErrors=filterErrors(errors);return{hasErrors:Object.keys(filteredErrors).length>0,errors:filteredErrors}}function validateRulesRecord(rules,values,path="",errors={}){return"object"!=typeof rules||null===rules?errors:Object.keys(rules).reduce(((acc,ruleKey)=>{const rule=rules[ruleKey],rulePath=`${""===path?"":`${path}.`}${ruleKey}`,value=getPath(rulePath,values);let arrayValidation=!1;return"function"==typeof rule&&(acc[rulePath]=rule(value,values,rulePath)),"object"==typeof rule&&Array.isArray(value)&&(arrayValidation=!0,value.forEach(((_item,index)=>validateRulesRecord(rule,values,`${rulePath}.${index}`,acc)))),"object"==typeof rule&&"object"==typeof value&&null!==value&&(arrayValidation||validateRulesRecord(rule,values,rulePath,acc)),acc}),errors)}function validateValues(validate,values){return getValidationResults("function"==typeof validate?validate(values):validateRulesRecord(validate,values))}function validateFieldValue(path,rules,values){if("string"!=typeof path)return{hasError:!1,error:null};const results=validateValues(rules,values),pathInError=Object.keys(results.errors).find((errorKey=>path.split(".").every(((pathPart,i)=>pathPart===errorKey.split(".")[i]))));return{hasError:!!pathInError,error:pathInError?results.errors[pathInError]:null}}var FORM_INDEX="__MANTINE_FORM_INDEX__";function shouldValidateOnChange(path,validateInputOnChange){return!!validateInputOnChange&&("boolean"==typeof validateInputOnChange?validateInputOnChange:!!Array.isArray(validateInputOnChange)&&validateInputOnChange.includes(path.replace(/[.][0-9]/g,`.${FORM_INDEX}`)))}function getStatus(status,path){const paths=Object.keys(status);if("string"==typeof path){const nestedPaths=paths.filter((statusPath=>statusPath.startsWith(`${path}.`)));return status[path]||nestedPaths.some((statusPath=>status[statusPath]))||!1}return paths.some((statusPath=>status[statusPath]))}function clearListState(field,state){if(null===state||"object"!=typeof state)return{};const clone=__spreadValues({},state);return Object.keys(state).forEach((errorKey=>{errorKey.includes(`${String(field)}.`)&&delete clone[errorKey]})),clone}function getIndexFromKeyAfterPath(key,path){const split=key.substring(path.length+1).split(".")[0];return parseInt(split,10)}function changeErrorIndices(path,index,errors,change){if(void 0===index)return errors;const pathString=`${String(path)}`;let clearedErrors=errors;-1===change&&(clearedErrors=clearListState(`${pathString}.${index}`,clearedErrors));const cloned=__spreadValues({},clearedErrors),changedKeys=new Set;return Object.entries(clearedErrors).filter((([key])=>{if(!key.startsWith(`${pathString}.`))return!1;const currIndex=getIndexFromKeyAfterPath(key,pathString);return!Number.isNaN(currIndex)&&currIndex>=index})).forEach((([key,value])=>{const currIndex=getIndexFromKeyAfterPath(key,pathString),newKey=key.replace(`${pathString}.${currIndex}`,`${pathString}.${currIndex+change}`);cloned[newKey]=value,changedKeys.add(newKey),changedKeys.has(key)||delete cloned[key]})),cloned}function reorderErrors(path,{from:from,to:to},errors){const oldKeyStart=`${path}.${from}`,newKeyStart=`${path}.${to}`,clone=__spreadValues({},errors);return Object.keys(errors).every((key=>{let oldKey,newKey;if(key.startsWith(oldKeyStart)&&(oldKey=key,newKey=key.replace(oldKeyStart,newKeyStart)),key.startsWith(newKeyStart)&&(oldKey=key.replace(newKeyStart,oldKeyStart),newKey=key),oldKey&&newKey){const value1=clone[oldKey],value2=clone[newKey];return void 0===value2?delete clone[oldKey]:clone[oldKey]=value2,void 0===value1?delete clone[newKey]:clone[newKey]=value1,!1}return!0})),clone}function useForm({initialValues:initialValues={},initialErrors:initialErrors={},initialDirty:initialDirty={},initialTouched:initialTouched={},clearInputErrorOnChange:clearInputErrorOnChange=!0,validateInputOnChange:validateInputOnChange=!1,validateInputOnBlur:validateInputOnBlur=!1,transformValues:transformValues=(values=>values),validate:rules}={}){const[touched,setTouched]=(0,import_react.useState)(initialTouched),[dirty,setDirty]=(0,import_react.useState)(initialDirty),[values,_setValues]=(0,import_react.useState)(initialValues),[errors,_setErrors]=(0,import_react.useState)(filterErrors(initialErrors)),valuesSnapshot=(0,import_react.useRef)(initialValues),setValuesSnapshot=_values=>{valuesSnapshot.current=_values},resetTouched=(0,import_react.useCallback)((()=>setTouched({})),[]),setErrors=(0,import_react.useCallback)((errs=>_setErrors((current=>filterErrors("function"==typeof errs?errs(current):errs)))),[]),clearErrors=(0,import_react.useCallback)((()=>_setErrors({})),[]),reset=(0,import_react.useCallback)((()=>{_setValues(valuesSnapshot.current),clearErrors(),setDirty({}),resetTouched()}),[]),setFieldError=(0,import_react.useCallback)(((path,error)=>setErrors((current=>__spreadProps(__spreadValues({},current),{[path]:error})))),[]),clearFieldError=(0,import_react.useCallback)((path=>setErrors((current=>{if("string"!=typeof path)return current;const clone=__spreadValues({},current);return delete clone[path],clone}))),[]),clearFieldDirty=(0,import_react.useCallback)((path=>setDirty((current=>{if("string"!=typeof path)return current;const result=clearListState(path,current);return delete result[path],result}))),[]),setFieldValue=(0,import_react.useCallback)(((path,value)=>{const shouldValidate=shouldValidateOnChange(path,validateInputOnChange);clearFieldDirty(path),setTouched((currentTouched=>__spreadProps(__spreadValues({},currentTouched),{[path]:!0}))),_setValues((current=>{const result=setPath(path,value,current);if(shouldValidate){const validationResults=validateFieldValue(path,rules,result);validationResults.hasError?setFieldError(path,validationResults.error):clearFieldError(path)}return result})),!shouldValidate&&clearInputErrorOnChange&&setFieldError(path,null)}),[]),setValues=(0,import_react.useCallback)((payload=>{_setValues((currentValues=>{const valuesPartial="function"==typeof payload?payload(currentValues):payload;return __spreadValues(__spreadValues({},currentValues),valuesPartial)})),clearInputErrorOnChange&&clearErrors()}),[]),reorderListItem=(0,import_react.useCallback)(((path,payload)=>{clearFieldDirty(path),_setValues((current=>reorderPath(path,payload,current))),_setErrors((errs=>reorderErrors(path,payload,errs)))}),[]),removeListItem=(0,import_react.useCallback)(((path,index)=>{clearFieldDirty(path),_setValues((current=>removePath(path,index,current))),_setErrors((errs=>changeErrorIndices(path,index,errs,-1)))}),[]),insertListItem=(0,import_react.useCallback)(((path,item,index)=>{clearFieldDirty(path),_setValues((current=>insertPath(path,item,index,current))),_setErrors((errs=>changeErrorIndices(path,index,errs,1)))}),[]),validate=(0,import_react.useCallback)((()=>{const results=validateValues(rules,values);return _setErrors(results.errors),results}),[values,rules]),validateField=(0,import_react.useCallback)((path=>{const results=validateFieldValue(path,rules,values);return results.hasError?setFieldError(path,results.error):clearFieldError(path),results}),[values,rules]),onReset=(0,import_react.useCallback)((event=>{event.preventDefault(),reset()}),[]),isTouched=(0,import_react.useCallback)((path=>getStatus(touched,path)),[touched]),isValid=(0,import_react.useCallback)((path=>path?!validateFieldValue(path,rules,values).hasError:!validateValues(rules,values).hasErrors),[values,rules]);return{values:values,errors:errors,setValues:setValues,setInitialValues:setValuesSnapshot,setErrors:setErrors,setFieldValue:setFieldValue,setFieldError:setFieldError,clearFieldError:clearFieldError,clearErrors:clearErrors,reset:reset,validate:validate,validateField:validateField,reorderListItem:reorderListItem,removeListItem:removeListItem,insertListItem:insertListItem,getInputProps:(path,{type:type="input",withError:withError=!0,withFocus:withFocus=!0}={})=>{const payload={onChange:getInputOnChange((value=>setFieldValue(path,value)))};return withError&&(payload.error=errors[path]),"checkbox"===type?payload.checked=getPath(path,values):payload.value=getPath(path,values),withFocus&&(payload.onFocus=()=>setTouched((current=>__spreadProps(__spreadValues({},current),{[path]:!0}))),payload.onBlur=()=>{if(shouldValidateOnChange(path,validateInputOnBlur)){const validationResults=validateFieldValue(path,rules,values);validationResults.hasError?setFieldError(path,validationResults.error):clearFieldError(path)}}),payload},onSubmit:(handleSubmit,handleValidationFailure)=>event=>{null==event||event.preventDefault();const results=validate();results.hasErrors?null==handleValidationFailure||handleValidationFailure(results.errors,values,event):null==handleSubmit||handleSubmit(transformValues(values),event)},onReset:onReset,isDirty:path=>{if(path){const overriddenValue=getPath(path,dirty);if("boolean"==typeof overriddenValue)return overriddenValue;const sliceOfValues=getPath(path,values),sliceOfInitialValues=getPath(path,valuesSnapshot.current);return!(0,import_fast_deep_equal.default)(sliceOfValues,sliceOfInitialValues)}return Object.keys(dirty).length>0?getStatus(dirty):!(0,import_fast_deep_equal.default)(values,valuesSnapshot.current)},isTouched:isTouched,setTouched:setTouched,setDirty:setDirty,resetTouched:resetTouched,resetDirty:_values=>{const newSnapshot=_values?__spreadValues(__spreadValues({},values),_values):values;setValuesSnapshot(newSnapshot),setDirty({})},isValid:isValid,getTransformedValues:input=>transformValues(input||values)}}var import_react2=__toESM(require("react"));function createFormContext(){const FormContext=(0,import_react2.createContext)(null);return[function({form:form,children:children}){return import_react2.default.createElement(FormContext.Provider,{value:form},children)},function(){const ctx=(0,import_react2.useContext)(FormContext);if(!ctx)throw new Error("useFormContext was called outside of FormProvider context");return ctx},useForm]}var import_react3=__toESM(require("react")),Form=(0,import_react3.forwardRef)(((_a,ref)=>{var _b=_a,{form:form,onSubmit:onSubmit,onReset:onReset}=_b,others=__objRest(_b,["form","onSubmit","onReset"]);return import_react3.default.createElement("form",__spreadProps(__spreadValues({},others),{onSubmit:form.onSubmit("function"==typeof onSubmit?onSubmit:()=>{}),onReset:event=>{null==onReset||onReset(event),form.onReset(event)},ref:ref}))}));function isNotEmpty(error){const _error=error||!0;return value=>"string"==typeof value?value.trim().length>0?null:_error:Array.isArray(value)?value.length>0?null:_error:null==value||!1===value?_error:null}function matches(regexp,error){const _error=error||!0;return value=>"string"!=typeof value?_error:regexp.test(value)?null:_error}function isEmail(error){return matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,error)}function isLengthValid(payload,value){if("number"==typeof payload)return value.length===payload;const{max:max,min:min}=payload;let valid=!0;return"number"==typeof max&&value.length>max&&(valid=!1),"number"==typeof min&&value.length<min&&(valid=!1),valid}function hasLength(payload,error){const _error=error||!0;return value=>"string"==typeof value?isLengthValid(payload,value.trim())?null:_error:"object"==typeof value&&null!==value&&"length"in value&&isLengthValid(payload,value)?null:_error}function isInRange({min:min,max:max},error){const _error=error||!0;return value=>{if("number"!=typeof value)return _error;let valid=!0;return"number"==typeof min&&value<min&&(valid=!1),"number"==typeof max&&value>max&&(valid=!1),valid?null:_error}}function matchesField(field,error){const _error=error||!0;return(value,values)=>values&&field in values&&value===values[field]?null:_error}function zodResolver(schema){return values=>{const parsed=schema.safeParse(values);if(parsed.success)return{};const results={};return parsed.error.errors.forEach((error=>{results[error.path.join(".")]=error.message})),results}}function superstructResolver(schema){return function(values){const formErrors={},[err]=schema.validate(values);return err?(err.failures().forEach((fieldFailure=>{const fieldName=fieldFailure.path.join(" ");formErrors[fieldFailure.path.join(".")]=`${fieldName}: ${fieldFailure.message}`})),formErrors):formErrors}}function yupResolver(schema){const _schema=schema;return values=>{try{return _schema.validateSync(values,{abortEarly:!1}),{}}catch(_yupError){const results={};return _yupError.inner.forEach((error=>{results[error.path.replaceAll("[",".").replaceAll("]","")]=error.message})),results}}}function joiResolver(schema,options){const _schema=schema;return values=>{const parsed=_schema.validate(values,__spreadValues({abortEarly:!1},options));if(!parsed.error)return{};const results={};return parsed.error.details.forEach((error=>{results[error.path.join(".")]=error.message})),results}}