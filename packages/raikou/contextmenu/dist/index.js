"use strict";var __create=Object.create,__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},__export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&"object"==typeof from||"function"==typeof from)for(let key of __getOwnPropNames(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=null!=mod?__create(__getProtoOf(mod)):{},__copyProps(!isNodeMode&&mod&&mod.__esModule?target:__defProp(target,"default",{value:mod,enumerable:!0}),mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod),src_exports={};__export(src_exports,{ContextMenuCtx:()=>ContextMenuCtx,ContextMenuDivider:()=>ContextMenuDivider,ContextMenuItem:()=>ContextMenuItem,ContextMenuPortal:()=>ContextMenuPortal,ContextMenuProvider:()=>ContextMenuProvider,ContextMenuSettingsCtx:()=>ContextMenuSettingsCtx,humanize:()=>humanize,useContextMenu:()=>useContextMenu}),module.exports=__toCommonJS(src_exports);var import_react=__toESM(require("react")),import_core=require("@raikou/core"),import_clsx=__toESM(require("clsx")),ContextMenuDivider_module_default={root:"m-8e23fdc4"};function ContextMenuDivider({className:className,style:style}){return import_react.default.createElement(import_core.Box,{className:(0,import_clsx.default)(ContextMenuDivider_module_default.root,className),style:style})}var import_core6=require("@raikou/core"),import_react2=__toESM(require("react")),import_core2=require("@raikou/core"),UnstyledButton_module_default={root:"m-87cf2631"},defaultProps={__staticSelector:"UnstyledButton"},UnstyledButton=(0,import_core2.polymorphicFactory)(((_props,ref)=>{const props=(0,import_core2.useProps)("UnstyledButton",defaultProps,_props),_a=props,{className:className,component:component="button",__staticSelector:__staticSelector,unstyled:unstyled,classNames:classNames,styles:styles,style:style}=_a,others=__objRest(_a,["className","component","__staticSelector","unstyled","classNames","styles","style"]),getStyles=(0,import_core2.useStyles)({name:__staticSelector,props:props,classes:UnstyledButton_module_default,className:className,style:style,classNames:classNames,styles:styles,unstyled:unstyled});return import_react2.default.createElement(import_core2.Box,__spreadValues(__spreadProps(__spreadValues({},getStyles("root",{focusable:!0})),{component:component,ref:ref,type:"button"===component?"button":void 0}),others))}));UnstyledButton.displayName="@raikou/core/UnstyledButton",UnstyledButton.classes=UnstyledButton_module_default;var import_hooks4=require("@raikou/hooks"),import_clsx3=__toESM(require("clsx")),import_react9=__toESM(require("react")),import_react8=__toESM(require("react")),import_core5=require("@raikou/core"),import_react3=__toESM(require("react")),import_core3=require("@raikou/core"),Paper_module_default={root:"m-1b7284a3"},defaultProps2={},varsResolver=(0,import_core3.createVarsResolver)(((_,{radius:radius,shadow:shadow})=>({root:{"--paper-radius":void 0===radius?void 0:(0,import_core3.getRadius)(radius),"--paper-shadow":(0,import_core3.getShadow)(shadow)}}))),Paper=(0,import_core3.polymorphicFactory)(((_props,ref)=>{const props=(0,import_core3.useProps)("Paper",defaultProps2,_props),_a=props,{classNames:classNames,className:className,style:style,styles:styles,unstyled:unstyled,withBorder:withBorder,vars:vars,radius:radius,shadow:shadow,variant:variant}=_a,others=__objRest(_a,["classNames","className","style","styles","unstyled","withBorder","vars","radius","shadow","variant"]),getStyles=(0,import_core3.useStyles)({name:"Paper",props:props,classes:Paper_module_default,className:className,style:style,classNames:classNames,styles:styles,unstyled:unstyled,vars:vars,varsResolver:varsResolver});return import_react3.default.createElement(import_core3.Box,__spreadValues(__spreadProps(__spreadValues({ref:ref,mod:{"data-with-border":withBorder}},getStyles("root")),{variant:variant}),others))}));Paper.displayName="@raikou/core/Paper",Paper.classes=Paper_module_default;var import_hooks3=require("@raikou/hooks"),import_clsx2=__toESM(require("clsx")),import_react7=__toESM(require("react")),import_react6=__toESM(require("react")),import_react4=__toESM(require("react")),import_react_dom=require("react-dom"),import_hooks=require("@raikou/hooks"),import_core4=require("@raikou/core");function createPortalNode(props){const node=document.createElement("div");return node.setAttribute("data-portal","true"),"string"==typeof props.className&&node.classList.add(...props.className.split(" ").filter(Boolean)),"object"==typeof props.style&&Object.assign(node.style,props.style),"string"==typeof props.id&&node.setAttribute("id",props.id),node}var defaultProps3={},Portal=(0,import_react4.forwardRef)(((props,ref)=>{const _a=(0,import_core4.useProps)("Portal",defaultProps3,props),{children:children,target:target}=_a,others=__objRest(_a,["children","target"]),[mounted,setMounted]=(0,import_react4.useState)(!1),nodeRef=(0,import_react4.useRef)(null);return(0,import_hooks.useIsomorphicEffect)((()=>(setMounted(!0),nodeRef.current=target?"string"==typeof target?document.querySelector(target):target:createPortalNode(others),(0,import_hooks.assignRef)(ref,nodeRef.current),!target&&nodeRef.current&&document.body.appendChild(nodeRef.current),()=>{!target&&nodeRef.current&&document.body.removeChild(nodeRef.current)})),[target]),mounted&&nodeRef.current?(0,import_react_dom.createPortal)(import_react4.default.createElement(import_react4.default.Fragment,null,children),nodeRef.current):null}));Portal.displayName="@raikou/core/Portal";var import_hooks2=require("@raikou/hooks"),import_react5=__toESM(require("react")),ContextMenuOverlay_module_default={root:"m-e74cf6ed"};function ContextMenuOverlay({zIndex:zIndex,children:children,onHide:onHide}){const handleHide=e=>{e.preventDefault(),onHide()};return import_react5.default.createElement("div",{className:ContextMenuOverlay_module_default.root,style:{zIndex:zIndex},onClick:handleHide,onContextMenu:handleHide},children)}function ContextMenuPortal(_a){var _b=_a,{onHide:onHide,zIndex:zIndex}=_b,otherProps=__objRest(_b,["onHide","zIndex"]);return(0,import_hooks2.useWindowEvent)("resize",onHide),(0,import_hooks2.useWindowEvent)("scroll",onHide),(0,import_hooks2.useHotkeys)([["Escape",onHide]]),import_react6.default.createElement(Portal,null,import_react6.default.createElement(ContextMenuOverlay,{zIndex:zIndex,onHide:onHide},import_react6.default.createElement(ContextMenu,__spreadProps(__spreadValues({},otherProps),{onHide:onHide}))))}var DEFAULT_SETTINGS={shadow:"sm",borderRadius:"xs",submenuDelay:500},ContextMenuSettingsCtx=(0,import_react7.createContext)(DEFAULT_SETTINGS),ContextMenuCtx=(0,import_react7.createContext)({showContextMenu:()=>()=>{},hideContextMenu:()=>{},isContextMenuVisible:!1});function ContextMenuProvider({zIndex:zIndex=9999,shadow:shadow=DEFAULT_SETTINGS.shadow,borderRadius:borderRadius=DEFAULT_SETTINGS.borderRadius,submenuDelay:submenuDelay=DEFAULT_SETTINGS.submenuDelay,children:children}){const[data,setData]=(0,import_react7.useState)(null),hideContextMenu=()=>{setData(null)};return import_react7.default.createElement(ContextMenuSettingsCtx.Provider,{value:{shadow:shadow,borderRadius:borderRadius,submenuDelay:submenuDelay}},import_react7.default.createElement(ContextMenuCtx.Provider,{value:{showContextMenu:(content,options)=>e=>{e.preventDefault(),e.stopPropagation(),setData({x:e.clientX,y:e.clientY,content:content,zIndex:(null==options?void 0:options.zIndex)||zIndex,className:null==options?void 0:options.className,style:null==options?void 0:options.style,classNames:null==options?void 0:options.classNames,styles:null==options?void 0:options.styles})},hideContextMenu:hideContextMenu,isContextMenuVisible:!!data}},children,data&&import_react7.default.createElement(ContextMenuPortal,__spreadValues({onHide:hideContextMenu},data))))}function useContextMenu(){return(0,import_react7.useContext)(ContextMenuCtx)}function humanize(value){const str=value.replace(/([a-z\d])([A-Z]+)/g,"$1 $2").replace(/\W|_/g," ").trim().toLowerCase();return`${str.charAt(0).toUpperCase()}${str.slice(1)}`}var ContextMenu_module_default={root:"m-3f3d33c1"};function ContextMenu({x:x,y:y,content:content,zIndex:zIndex,onHide:onHide,className:className,style:style,classNames:classNames,styles:styles}){var _a;const{shadow:shadow,borderRadius:borderRadius}=(0,import_react8.useContext)(ContextMenuSettingsCtx),[paperRef]=(0,import_hooks3.useResizeObserver)(),{width:width,height:height}=(null==(_a=paperRef.current)?void 0:_a.getBoundingClientRect())||{width:0,height:0};let windowWidth=0,windowHeight=0;"undefined"!=typeof window&&({innerWidth:windowWidth,innerHeight:windowHeight}=window);const{dir:dir}=(0,import_core5.useDirection)();return import_react8.default.createElement(Paper,{ref:paperRef,shadow:shadow,radius:borderRadius,className:(0,import_clsx2.default)(ContextMenu_module_default.root,className,null==classNames?void 0:classNames.root),style:[({spacing:{md:md}})=>{const mdSpacing=(0,import_core5.px)(md);return{zIndex:zIndex,top:y+height+mdSpacing>windowHeight?windowHeight-height-mdSpacing:y,left:"ltr"===dir?x+width+mdSpacing>windowWidth?windowWidth-width-mdSpacing:x:windowWidth-mdSpacing-(x-width-mdSpacing<0?width+mdSpacing:x)}},style,null==styles?void 0:styles.root]},Array.isArray(content)?content.map((_b=>{var _c=_b,{key:key,hidden:hidden,className:className2,style:style2,onClick:onClick,items:items,title:title}=_c,otherOptions=__objRest(_c,["key","hidden","className","style","onClick","items","title"]);return hidden?null:onClick||items?import_react8.default.createElement(ContextMenuItem,__spreadValues({key:key,className:(0,import_clsx2.default)(null==classNames?void 0:classNames.item,className2),style:[null==styles?void 0:styles.item,style2],title:null!=title?title:humanize(key),onClick:onClick,onHide:onHide,items:items},otherOptions)):import_react8.default.createElement(ContextMenuDivider,{key:key,className:(0,import_clsx2.default)(null==classNames?void 0:classNames.divider,className2),style:[null==styles?void 0:styles.divider,style2]})})):content(onHide))}var ContextMenuItem_module_default={"item-button":"m-fe87f320","button-title":"m-57a2c689"};function ContextMenuItem({className:className,style:style,icon:icon,title:title,color:color,disabled:disabled,onClick:onClick,onHide:onHide,items:items}){const ref=(0,import_react9.useRef)(null),{submenuDelay:submenuDelay}=(0,import_react9.useContext)(ContextMenuSettingsCtx),[submenuPosition,setSubmenuPosition]=(0,import_react9.useState)(null),handleClick=onClick?e=>{onHide(),onClick(e)}:void 0,{start:startShowingSubmenu,clear:stopShowingSubmenu}=(0,import_hooks4.useTimeout)((()=>{const{top:y,right:x}=ref.current.getBoundingClientRect();setSubmenuPosition({x:x,y:y})}),submenuDelay),{start:startHidingSubmenu,clear:stopHidingSubmenu}=(0,import_hooks4.useTimeout)((()=>{setSubmenuPosition(null)}),submenuDelay),hasItemsAndIsNotDisabled=items&&!disabled;return import_react9.default.createElement("div",{onMouseEnter:hasItemsAndIsNotDisabled?()=>{stopHidingSubmenu(),startShowingSubmenu()}:void 0,onMouseLeave:hasItemsAndIsNotDisabled?()=>{stopShowingSubmenu(),startHidingSubmenu()}:void 0},import_react9.default.createElement(UnstyledButton,{ref:ref,style:[theme=>{const parsedColor=color?(0,import_core6.parseThemeColor)({color:color,theme:theme}).value:void 0;return{"--raikou-contextmenu-item-button-color":parsedColor||"var(--raikou-color-text)","--raikou-contextmenu-item-button-hover-bg-color-light":parsedColor?(0,import_core6.rgba)(parsedColor,.08):(0,import_core6.rgba)("#ced4da",.25),"--raikou-contextmenu-item-button-hover-bg-color-dark":parsedColor?(0,import_core6.rgba)(parsedColor,.15):(0,import_core6.rgba)("#5c5f66",.25),"--raikou-contextmenu-item-button-pressed-bg-color-light":parsedColor?(0,import_core6.rgba)(parsedColor,.2):(0,import_core6.rgba)("#ced4da",.5),"--raikou-contextmenu-item-button-pressed-bg-color-dark":parsedColor?(0,import_core6.rgba)(parsedColor,.3):(0,import_core6.rgba)("#5c5f66",.5)}},style],className:(0,import_clsx3.default)(ContextMenuItem_module_default["item-button"],className),disabled:disabled,onClick:handleClick},icon&&import_react9.default.createElement(import_core6.Box,{fz:0,mr:"xs",mt:-2},icon),import_react9.default.createElement("div",{className:ContextMenuItem_module_default["button-title"]},title),items&&import_react9.default.createElement(import_core6.Box,{fz:10,mt:-2,ml:"xs"},"▶")),submenuPosition&&import_react9.default.createElement(ContextMenu,__spreadValues({content:items,onHide:onHide},submenuPosition)))}